var St=Object.defineProperty,Ot=Object.defineProperties;var kt=Object.getOwnPropertyDescriptors;var Ne=Object.getOwnPropertySymbols;var cl=Object.prototype.hasOwnProperty,fl=Object.prototype.propertyIsEnumerable;var dl=(e,n,s)=>n in e?St(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,w=(e,n)=>{for(var s in n||(n={}))cl.call(n,s)&&dl(e,s,n[s]);if(Ne)for(var s of Ne(n))fl.call(n,s)&&dl(e,s,n[s]);return e},A=(e,n)=>Ot(e,kt(n));var pl=(e,n)=>{var s={};for(var d in e)cl.call(e,d)&&n.indexOf(d)<0&&(s[d]=e[d]);if(e!=null&&Ne)for(var d of Ne(e))n.indexOf(d)<0&&fl.call(e,d)&&(s[d]=e[d]);return s};import{ay as Vt,h as Vl,aw as ae,k as ge,ap as Qe,B as j,l as ue,a8 as ne,r as wt,aE as Et,a5 as It,s as Me,b0 as vl,as as Tt,a as wl,o as Nt,aD as Mt,j as ve,v as Kt,N as hl,a9 as $t,q as Rt,t as he,b1 as Lt,y as Dt,b2 as Bt,w as El,ao as Il,aC as Pt,p as zt}from"./bootstrap-BSJlHAA1.js";import{d as At,u as ml,E as Ft,a as Wt}from"./index-Ca2TJ5ni.js";import{s as Ht,E as jt}from"./index-C1ne8b5M.js";import{e as Tl,f as Ut,t as bl,E as Gt,u as qt}from"./index-BGsNAxPN.js";import{s as ye,a as Nl,E as je}from"./index-D9zEg2oU.js";import{t as Qt,d as gl}from"./error-B0UPUI15.js";import{y as be,c as f,p as se,ak as Zt,w as W,z as De,d as Y,O as me,e as I,f as S,k as M,h as N,t as U,n as C,u as Fe,af as Ce,M as X,H as Jt,m as L,g as R,l as Ke,r as T,o as Be,i as H,a0 as Xt,a as oe,av as Yt,q as _t,am as _,a6 as xt,F as x,E as B,v as Z,Q as yl,R as Cl,G as Sl,D as We,aw as en,ac as Ml,Z as ln,s as He}from"../jse/index-index-Mi--__4F.js";import{c as ie}from"./isEqual-CWvjYAWD.js";import{b as Kl,u as tn,a as nn}from"./use-form-item-59ZlFhQL.js";import{a as an,u as sn}from"./index-Cz2RXOZ9.js";import{b as on}from"./use-form-common-props-DNTRVKIm.js";import{U as F,C as $l,u as un,p as Le}from"./index-Dv7eLzK0.js";import{s as rn}from"./scroll-BV7wesST.js";import{C as dn}from"./index-D8dl2QHQ.js";import"./index-Css9bkMx.js";import"./_baseFindIndex-D7XfJLKM.js";import"./_baseIteratee-D4H75U-u.js";import"./index-CcCN2ww3.js";import"./index-7c029r1G.js";function J(){if(!arguments.length)return[];var e=arguments[0];return Vt(e)?e:[e]}const Ue="ElOption",cn=Vl({value:{type:[String,Number,Boolean,Object],required:!0},label:{type:[String,Number]},created:Boolean,disabled:Boolean});function fn(e,n){const s=be(ye);s||Qt(Ue,"usage: <el-select><el-option /></el-select/>");const d=be(Nl,{disabled:!1}),i=f(()=>b(J(s.props.modelValue),e.value)),c=f(()=>{var u;if(s.props.multiple){const p=J((u=s.props.modelValue)!=null?u:[]);return!i.value&&p.length>=s.props.multipleLimit&&s.props.multipleLimit>0}else return!1}),t=f(()=>e.label||(se(e.value)?"":e.value)),y=f(()=>e.value||e.label||""),o=f(()=>e.disabled||n.groupDisabled||c.value),h=De(),b=(u=[],p)=>{if(se(e.value)){const g=s.props.valueKey;return u&&u.some(k=>Zt(ae(k,g))===ae(p,g))}else return u&&u.includes(p)},v=()=>{!e.disabled&&!d.disabled&&(s.states.hoveringIndex=s.optionsArray.indexOf(h.proxy))},r=u=>{const p=new RegExp(Tl(u),"i");n.visible=p.test(String(t.value))||e.created};return W(()=>t.value,()=>{!e.created&&!s.props.remote&&s.setSelected()}),W(()=>e.value,(u,p)=>{const{remote:g,valueKey:k}=s.props;if((g?u!==p:!ie(u,p))&&(s.onOptionDestroy(p,h.proxy),s.onOptionCreate(h.proxy)),!e.created&&!g){if(k&&se(u)&&se(p)&&u[k]===p[k])return;s.setSelected()}}),W(()=>d.disabled,()=>{n.groupDisabled=d.disabled},{immediate:!0}),{select:s,currentLabel:t,currentValue:y,itemSelected:i,isDisabled:o,hoverItem:v,updateOption:r}}const pn=Y({name:Ue,componentName:Ue,props:cn,setup(e){const n=ue("select"),s=Kl(),d=f(()=>[n.be("dropdown","item"),n.is("disabled",Fe(y)),n.is("selected",Fe(t)),n.is("hovering",Fe(r))]),i=X({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:c,itemSelected:t,isDisabled:y,select:o,hoverItem:h,updateOption:b}=fn(e,i),{visible:v,hover:r}=Ce(i),u=De().proxy;o.onOptionCreate(u),Jt(()=>{const g=u.value,{selected:k}=o.states,K=k.some(P=>P.value===u.value);L(()=>{o.states.cachedOptions.get(g)===u&&!K&&o.states.cachedOptions.delete(g)}),o.onOptionDestroy(g,u)});function p(){y.value||o.handleOptionSelect(u)}return{ns:n,id:s,containerKls:d,currentLabel:c,itemSelected:t,isDisabled:y,select:o,visible:v,hover:r,states:i,hoverItem:h,updateOption:b,selectOptionClick:p}}});function vn(e,n){return me((S(),I("li",{id:e.id,class:C(e.containerKls),role:"option","aria-disabled":e.isDisabled||void 0,"aria-selected":e.itemSelected,onMousemove:e.hoverItem,onClick:j(e.selectOptionClick,["stop"])},[M(e.$slots,"default",{},()=>[N("span",null,U(e.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMousemove","onClick"])),[[Qe,e.visible]])}var Ze=ge(pn,[["render",vn],["__file","option.vue"]]);const hn=Y({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const e=be(ye),n=ue("select"),s=f(()=>e.props.popperClass),d=f(()=>e.props.multiple),i=f(()=>e.props.fitInputWidth),c=T("");function t(){var y;c.value=`${(y=e.selectRef)==null?void 0:y.offsetWidth}px`}return Be(()=>{t(),ne(e.selectRef,t)}),{ns:n,minWidth:c,popperClass:s,isMultiple:d,isFitInputWidth:i}}});function mn(e,n,s,d,i,c){return S(),I("div",{class:C([e.ns.b("dropdown"),e.ns.is("multiple",e.isMultiple),e.popperClass]),style:Ke({[e.isFitInputWidth?"width":"minWidth"]:e.minWidth})},[e.$slots.header?(S(),I("div",{key:0,class:C(e.ns.be("dropdown","header"))},[M(e.$slots,"header")],2)):R("v-if",!0),M(e.$slots,"default"),e.$slots.footer?(S(),I("div",{key:1,class:C(e.ns.be("dropdown","footer"))},[M(e.$slots,"footer")],2)):R("v-if",!0)],6)}var bn=ge(hn,[["render",mn],["__file","select-dropdown.vue"]]);const gn=(e,n)=>{const{t:s}=wt(),d=Kl(),i=ue("select"),c=ue("input"),t=X({inputValue:"",options:new Map,cachedOptions:new Map,optionValues:[],selected:[],selectionWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),y=T(),o=T(),h=T(),b=T(),v=T(),r=T(),u=T(),p=T(),g=T(),k=T(),K=T(),{isComposing:P,handleCompositionStart:G,handleCompositionUpdate:O,handleCompositionEnd:ee}=an({afterComposition:l=>nl(l)}),{wrapperRef:Se,isFocused:z,handleBlur:Ll}=sn(v,{beforeFocus(){return de.value},afterFocus(){e.automaticDropdown&&!V.value&&(V.value=!0,t.menuVisibleOnFocus=!0)},beforeBlur(l){var a,m;return((a=h.value)==null?void 0:a.isFocusInsideContent(l))||((m=b.value)==null?void 0:m.isFocusInsideContent(l))},afterBlur(){var l;V.value=!1,t.menuVisibleOnFocus=!1,e.validateEvent&&((l=q==null?void 0:q.validate)==null||l.call(q,"blur").catch(a=>gl()))}}),V=T(!1),re=T(),{form:Oe,formItem:q}=tn(),{inputId:Dl}=nn(e,{formItemContext:q}),{valueOnClear:Bl,isEmptyValue:Pl}=Et(e),de=f(()=>e.disabled||(Oe==null?void 0:Oe.disabled)),Pe=f(()=>H(e.modelValue)?e.modelValue.length>0:!Pl(e.modelValue)),zl=f(()=>{var l;return(l=Oe==null?void 0:Oe.statusIcon)!=null?l:!1}),Al=f(()=>e.clearable&&!de.value&&t.inputHovering&&Pe.value),Xe=f(()=>e.remote&&e.filterable&&!e.remoteShowSuffix?"":e.suffixIcon),Fl=f(()=>i.is("reverse",!!(Xe.value&&V.value))),ze=f(()=>(q==null?void 0:q.validateState)||""),Wl=f(()=>ze.value&&It[ze.value]),Hl=f(()=>e.remote?300:0),jl=f(()=>e.remote&&!t.inputValue&&t.options.size===0),Ul=f(()=>e.loading?e.loadingText||s("el.select.loading"):e.filterable&&t.inputValue&&t.options.size>0&&ce.value===0?e.noMatchText||s("el.select.noMatch"):t.options.size===0?e.noDataText||s("el.select.noData"):null),ce=f(()=>$.value.filter(l=>l.visible).length),$=f(()=>{const l=Array.from(t.options.values()),a=[];return t.optionValues.forEach(m=>{const E=l.findIndex(D=>D.value===m);E>-1&&a.push(l[E])}),a.length>=l.length?a:l}),Gl=f(()=>Array.from(t.cachedOptions.values())),ql=f(()=>{const l=$.value.filter(a=>!a.created).some(a=>a.currentLabel===t.inputValue);return e.filterable&&e.allowCreate&&t.inputValue!==""&&!l}),Ye=()=>{e.filterable&&oe(e.filterMethod)||e.filterable&&e.remote&&oe(e.remoteMethod)||$.value.forEach(l=>{var a;(a=l.updateOption)==null||a.call(l,t.inputValue)})},_e=on(),Ql=f(()=>["small"].includes(_e.value)?"small":"default"),Zl=f({get(){return V.value&&!jl.value},set(l){V.value=l}}),Jl=f(()=>{if(e.multiple&&!Me(e.modelValue))return J(e.modelValue).length===0&&!t.inputValue;const l=H(e.modelValue)?e.modelValue[0]:e.modelValue;return e.filterable||Me(l)?!t.inputValue:!0}),Xl=f(()=>{var l;const a=(l=e.placeholder)!=null?l:s("el.select.placeholder");return e.multiple||!Pe.value?a:t.selectedLabel}),Yl=f(()=>vl?null:"mouseenter");W(()=>e.modelValue,(l,a)=>{e.multiple&&e.filterable&&!e.reserveKeyword&&(t.inputValue="",ke("")),Ve(),!ie(l,a)&&e.validateEvent&&(q==null||q.validate("change").catch(m=>gl()))},{flush:"post",deep:!0}),W(()=>V.value,l=>{l?ke(t.inputValue):(t.inputValue="",t.previousQuery=null,t.isBeforeHide=!0),n("visible-change",l)}),W(()=>t.options.entries(),()=>{wl&&(Ve(),e.defaultFirstOption&&(e.filterable||e.remote)&&ce.value&&xe())},{flush:"post"}),W([()=>t.hoveringIndex,$],([l])=>{Nt(l)&&l>-1?re.value=$.value[l]||{}:re.value={},$.value.forEach(a=>{a.hover=re.value===a})}),Xt(()=>{t.isBeforeHide||Ye()});const ke=l=>{t.previousQuery===l||P.value||(t.previousQuery=l,e.filterable&&oe(e.filterMethod)?e.filterMethod(l):e.filterable&&e.remote&&oe(e.remoteMethod)&&e.remoteMethod(l),e.defaultFirstOption&&(e.filterable||e.remote)&&ce.value?L(xe):L(_l))},xe=()=>{const l=$.value.filter(D=>D.visible&&!D.disabled&&!D.states.groupDisabled),a=l.find(D=>D.created),m=l[0],E=$.value.map(D=>D.value);t.hoveringIndex=il(E,a||m)},Ve=()=>{if(e.multiple)t.selectedLabel="";else{const a=H(e.modelValue)?e.modelValue[0]:e.modelValue,m=el(a);t.selectedLabel=m.currentLabel,t.selected=[m];return}const l=[];Me(e.modelValue)||J(e.modelValue).forEach(a=>{l.push(el(a))}),t.selected=l},el=l=>{let a;const m=Yt(l);for(let le=t.cachedOptions.size-1;le>=0;le--){const Q=Gl.value[le];if(m?ae(Q.value,e.valueKey)===ae(l,e.valueKey):Q.value===l){a={value:l,currentLabel:Q.currentLabel,get isDisabled(){return Q.isDisabled}};break}}if(a)return a;const E=m?l.label:l!=null?l:"";return{value:l,currentLabel:E}},_l=()=>{t.hoveringIndex=$.value.findIndex(l=>t.selected.some(a=>Ie(a)===Ie(l)))},xl=()=>{t.selectionWidth=o.value.getBoundingClientRect().width},et=()=>{t.collapseItemWidth=k.value.getBoundingClientRect().width},Ae=()=>{var l,a;(a=(l=h.value)==null?void 0:l.updatePopper)==null||a.call(l)},ll=()=>{var l,a;(a=(l=b.value)==null?void 0:l.updatePopper)==null||a.call(l)},tl=()=>{t.inputValue.length>0&&!V.value&&(V.value=!0),ke(t.inputValue)},nl=l=>{if(t.inputValue=l.target.value,e.remote)al();else return tl()},al=At(()=>{tl()},Hl.value),fe=l=>{ie(e.modelValue,l)||n($l,l)},lt=l=>Ut(l,a=>{const m=t.cachedOptions.get(a);return m&&!m.disabled&&!m.states.groupDisabled}),tt=l=>{if(e.multiple&&l.code!==Tt.delete&&l.target.value.length<=0){const a=J(e.modelValue).slice(),m=lt(a);if(m<0)return;const E=a[m];a.splice(m,1),n(F,a),fe(a),n("remove-tag",E)}},nt=(l,a)=>{const m=t.selected.indexOf(a);if(m>-1&&!de.value){const E=J(e.modelValue).slice();E.splice(m,1),n(F,E),fe(E),n("remove-tag",a.value)}l.stopPropagation(),Ee()},sl=l=>{l.stopPropagation();const a=e.multiple?[]:Bl.value;if(e.multiple)for(const m of t.selected)m.isDisabled&&a.push(m.value);n(F,a),fe(a),t.hoveringIndex=-1,V.value=!1,n("clear"),Ee()},ol=l=>{var a;if(e.multiple){const m=J((a=e.modelValue)!=null?a:[]).slice(),E=il(m,l);E>-1?m.splice(E,1):(e.multipleLimit<=0||m.length<e.multipleLimit)&&m.push(l.value),n(F,m),fe(m),l.created&&ke(""),e.filterable&&!e.reserveKeyword&&(t.inputValue="")}else n(F,l.value),fe(l.value),V.value=!1;Ee(),!V.value&&L(()=>{we(l)})},il=(l,a)=>Me(a)?-1:se(a.value)?l.findIndex(m=>ie(ae(m,e.valueKey),Ie(a))):l.indexOf(a.value),we=l=>{var a,m,E,D,le;const Q=H(l)?l[0]:l;let Te=null;if(Q!=null&&Q.value){const pe=$.value.filter(Ct=>Ct.value===Q.value);pe.length>0&&(Te=pe[0].$el)}if(h.value&&Te){const pe=(D=(E=(m=(a=h.value)==null?void 0:a.popperRef)==null?void 0:m.contentRef)==null?void 0:E.querySelector)==null?void 0:D.call(E,`.${i.be("dropdown","wrap")}`);pe&&rn(pe,Te)}(le=K.value)==null||le.handleScroll()},at=l=>{t.options.set(l.value,l),t.cachedOptions.set(l.value,l)},st=(l,a)=>{t.options.get(l)===a&&t.options.delete(l)},ot=f(()=>{var l,a;return(a=(l=h.value)==null?void 0:l.popperRef)==null?void 0:a.contentRef}),it=()=>{t.isBeforeHide=!1,L(()=>{var l;(l=K.value)==null||l.update(),we(t.selected)})},Ee=()=>{var l;(l=v.value)==null||l.focus()},ut=()=>{var l;if(V.value){V.value=!1,L(()=>{var a;return(a=v.value)==null?void 0:a.blur()});return}(l=v.value)==null||l.blur()},rt=l=>{sl(l)},dt=l=>{if(V.value=!1,z.value){const a=new FocusEvent("focus",l);L(()=>Ll(a))}},ct=()=>{t.inputValue.length>0?t.inputValue="":V.value=!1},ul=()=>{de.value||(vl&&(t.inputHovering=!0),t.menuVisibleOnFocus?t.menuVisibleOnFocus=!1:V.value=!V.value)},ft=()=>{if(!V.value)ul();else{const l=$.value[t.hoveringIndex];l&&!l.isDisabled&&ol(l)}},Ie=l=>se(l.value)?ae(l.value,e.valueKey):l.value,pt=f(()=>$.value.filter(l=>l.visible).every(l=>l.isDisabled)),vt=f(()=>e.multiple?e.collapseTags?t.selected.slice(0,e.maxCollapseTags):t.selected:[]),ht=f(()=>e.multiple?e.collapseTags?t.selected.slice(e.maxCollapseTags):[]:[]),rl=l=>{if(!V.value){V.value=!0;return}if(!(t.options.size===0||ce.value===0||P.value)&&!pt.value){l==="next"?(t.hoveringIndex++,t.hoveringIndex===t.options.size&&(t.hoveringIndex=0)):l==="prev"&&(t.hoveringIndex--,t.hoveringIndex<0&&(t.hoveringIndex=t.options.size-1));const a=$.value[t.hoveringIndex];(a.isDisabled||!a.visible)&&rl(l),L(()=>we(re.value))}},mt=()=>{if(!o.value)return 0;const l=window.getComputedStyle(o.value);return Number.parseFloat(l.gap||"6px")},bt=f(()=>{const l=mt();return{maxWidth:`${k.value&&e.maxCollapseTags===1?t.selectionWidth-t.collapseItemWidth-l:t.selectionWidth}px`}}),gt=f(()=>({maxWidth:`${t.selectionWidth}px`})),yt=l=>{n("popup-scroll",l)};return ne(o,xl),ne(p,Ae),ne(Se,Ae),ne(g,ll),ne(k,et),Be(()=>{Ve()}),{inputId:Dl,contentId:d,nsSelect:i,nsInput:c,states:t,isFocused:z,expanded:V,optionsArray:$,hoverOption:re,selectSize:_e,filteredOptionsCount:ce,updateTooltip:Ae,updateTagTooltip:ll,debouncedOnInputChange:al,onInput:nl,deletePrevTag:tt,deleteTag:nt,deleteSelected:sl,handleOptionSelect:ol,scrollToOption:we,hasModelValue:Pe,shouldShowPlaceholder:Jl,currentPlaceholder:Xl,mouseEnterEventName:Yl,needStatusIcon:zl,showClose:Al,iconComponent:Xe,iconReverse:Fl,validateState:ze,validateIcon:Wl,showNewOption:ql,updateOptions:Ye,collapseTagSize:Ql,setSelected:Ve,selectDisabled:de,emptyText:Ul,handleCompositionStart:G,handleCompositionUpdate:O,handleCompositionEnd:ee,onOptionCreate:at,onOptionDestroy:st,handleMenuEnter:it,focus:Ee,blur:ut,handleClearClick:rt,handleClickOutside:dt,handleEsc:ct,toggleMenu:ul,selectOption:ft,getValueKey:Ie,navigateOptions:rl,dropdownMenuVisible:Zl,showTagList:vt,collapseTagList:ht,popupScroll:yt,tagStyle:bt,collapseTagStyle:gt,popperRef:ot,inputRef:v,tooltipRef:h,tagTooltipRef:b,prefixRef:r,suffixRef:u,selectRef:y,wrapperRef:Se,selectionRef:o,scrollbarRef:K,menuRef:p,tagMenuRef:g,collapseItemRef:k}};var yn=Y({name:"ElOptions",setup(e,{slots:n}){const s=be(ye);let d=[];return()=>{var i,c;const t=(i=n.default)==null?void 0:i.call(n),y=[];function o(h){H(h)&&h.forEach(b=>{var v,r,u,p;const g=(v=(b==null?void 0:b.type)||{})==null?void 0:v.name;g==="ElOptionGroup"?o(!_t(b.children)&&!H(b.children)&&oe((r=b.children)==null?void 0:r.default)?(u=b.children)==null?void 0:u.default():b.children):g==="ElOption"?y.push((p=b.props)==null?void 0:p.value):H(b.children)&&o(b.children)})}return t.length&&o((c=t[0])==null?void 0:c.children),ie(y,d)||(d=y,s&&(s.states.optionValues=y)),t}}});const Cn=Vl(w(w({name:String,id:String,modelValue:{type:ve([Array,String,Number,Boolean,Object]),default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:Rt,effect:{type:ve(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:ve(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:ml.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:hl,default:$t},fitInputWidth:Boolean,suffixIcon:{type:hl,default:Kt},tagType:A(w({},bl.type),{default:"info"}),tagEffect:A(w({},bl.effect),{default:"light"}),validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,showArrow:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:ve(String),values:Ft,default:"bottom-start"},fallbackPlacements:{type:ve(Array),default:["bottom-start","top-start","right","left"]},tabindex:{type:[String,Number],default:0},appendTo:ml.appendTo},Mt),un(["ariaLabel"])));Ht.scroll;const Ol="ElSelect",Sn=Y({name:Ol,componentName:Ol,components:{ElSelectMenu:bn,ElOption:Ze,ElOptions:yn,ElTag:Gt,ElScrollbar:jt,ElTooltip:Wt,ElIcon:Dt},directives:{ClickOutside:dn},props:Cn,emits:[F,$l,"remove-tag","clear","visible-change","focus","blur","popup-scroll"],setup(e,{emit:n}){const s=f(()=>{const{modelValue:o,multiple:h}=e,b=h?[]:void 0;return H(o)?h?o:b:h?b:o}),d=X(A(w({},Ce(e)),{modelValue:s})),i=gn(d,n),{calculatorRef:c,inputStyle:t}=qt();Ml(ye,X({props:d,states:i.states,selectRef:i.selectRef,optionsArray:i.optionsArray,setSelected:i.setSelected,handleOptionSelect:i.handleOptionSelect,onOptionCreate:i.onOptionCreate,onOptionDestroy:i.onOptionDestroy}));const y=f(()=>e.multiple?i.states.selected.map(o=>o.currentLabel):i.states.selectedLabel);return A(w({},i),{modelValue:s,selectedLabel:y,calculatorRef:c,inputStyle:t})}});function On(e,n){const s=_("el-tag"),d=_("el-tooltip"),i=_("el-icon"),c=_("el-option"),t=_("el-options"),y=_("el-scrollbar"),o=_("el-select-menu"),h=xt("click-outside");return me((S(),I("div",{ref:"selectRef",class:C([e.nsSelect.b(),e.nsSelect.m(e.selectSize)]),[en(e.mouseEnterEventName)]:b=>e.states.inputHovering=!0,onMouseleave:b=>e.states.inputHovering=!1},[x(d,{ref:"tooltipRef",visible:e.dropdownMenuVisible,placement:e.placement,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,pure:"",trigger:"click",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:e.persistent,"append-to":e.appendTo,"show-arrow":e.showArrow,offset:e.offset,onBeforeShow:e.handleMenuEnter,onHide:b=>e.states.isBeforeHide=!1},{default:B(()=>{var b;return[N("div",{ref:"wrapperRef",class:C([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled)]),onClick:j(e.toggleMenu,["prevent"])},[e.$slots.prefix?(S(),I("div",{key:0,ref:"prefixRef",class:C(e.nsSelect.e("prefix"))},[M(e.$slots,"prefix")],2)):R("v-if",!0),N("div",{ref:"selectionRef",class:C([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.$slots.prefix&&!!e.states.selected.length)])},[e.multiple?M(e.$slots,"tag",{key:0},()=>[(S(!0),I(yl,null,Cl(e.showTagList,v=>(S(),I("div",{key:e.getValueKey(v),class:C(e.nsSelect.e("selected-item"))},[x(s,{closable:!e.selectDisabled&&!v.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:Ke(e.tagStyle),onClose:r=>e.deleteTag(r,v)},{default:B(()=>[N("span",{class:C(e.nsSelect.e("tags-text"))},[M(e.$slots,"label",{label:v.currentLabel,value:v.value},()=>[Sl(U(v.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),e.collapseTags&&e.states.selected.length>e.maxCollapseTags?(S(),Z(d,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:B(()=>[N("div",{ref:"collapseItemRef",class:C(e.nsSelect.e("selected-item"))},[x(s,{closable:!1,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:Ke(e.collapseTagStyle)},{default:B(()=>[N("span",{class:C(e.nsSelect.e("tags-text"))}," + "+U(e.states.selected.length-e.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:B(()=>[N("div",{ref:"tagMenuRef",class:C(e.nsSelect.e("selection"))},[(S(!0),I(yl,null,Cl(e.collapseTagList,v=>(S(),I("div",{key:e.getValueKey(v),class:C(e.nsSelect.e("selected-item"))},[x(s,{class:"in-tooltip",closable:!e.selectDisabled&&!v.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:r=>e.deleteTag(r,v)},{default:B(()=>[N("span",{class:C(e.nsSelect.e("tags-text"))},[M(e.$slots,"label",{label:v.currentLabel,value:v.value},()=>[Sl(U(v.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):R("v-if",!0)]):R("v-if",!0),N("div",{class:C([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable)])},[me(N("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":v=>e.states.inputValue=v,type:"text",name:e.name,class:C([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,autocomplete:e.autocomplete,style:Ke(e.inputStyle),tabindex:e.tabindex,role:"combobox",readonly:!e.filterable,spellcheck:"false","aria-activedescendant":((b=e.hoverOption)==null?void 0:b.id)||"","aria-controls":e.contentId,"aria-expanded":e.dropdownMenuVisible,"aria-label":e.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[he(j(v=>e.navigateOptions("next"),["stop","prevent"]),["down"]),he(j(v=>e.navigateOptions("prev"),["stop","prevent"]),["up"]),he(j(e.handleEsc,["stop","prevent"]),["esc"]),he(j(e.selectOption,["stop","prevent"]),["enter"]),he(j(e.deletePrevTag,["stop"]),["delete"])],onCompositionstart:e.handleCompositionStart,onCompositionupdate:e.handleCompositionUpdate,onCompositionend:e.handleCompositionEnd,onInput:e.onInput,onClick:j(e.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","tabindex","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[Lt,e.states.inputValue]]),e.filterable?(S(),I("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:C(e.nsSelect.e("input-calculator")),textContent:U(e.states.inputValue)},null,10,["textContent"])):R("v-if",!0)],2),e.shouldShowPlaceholder?(S(),I("div",{key:1,class:C([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue)])},[e.hasModelValue?M(e.$slots,"label",{key:0,label:e.currentPlaceholder,value:e.modelValue},()=>[N("span",null,U(e.currentPlaceholder),1)]):(S(),I("span",{key:1},U(e.currentPlaceholder),1))],2)):R("v-if",!0)],2),N("div",{ref:"suffixRef",class:C(e.nsSelect.e("suffix"))},[e.iconComponent&&!e.showClose?(S(),Z(i,{key:0,class:C([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.iconReverse])},{default:B(()=>[(S(),Z(We(e.iconComponent)))]),_:1},8,["class"])):R("v-if",!0),e.showClose&&e.clearIcon?(S(),Z(i,{key:1,class:C([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.nsSelect.e("clear")]),onClick:e.handleClearClick},{default:B(()=>[(S(),Z(We(e.clearIcon)))]),_:1},8,["class","onClick"])):R("v-if",!0),e.validateState&&e.validateIcon&&e.needStatusIcon?(S(),Z(i,{key:2,class:C([e.nsInput.e("icon"),e.nsInput.e("validateIcon"),e.nsInput.is("loading",e.validateState==="validating")])},{default:B(()=>[(S(),Z(We(e.validateIcon)))]),_:1},8,["class"])):R("v-if",!0)],2)],10,["onClick"])]}),content:B(()=>[x(o,{ref:"menuRef"},{default:B(()=>[e.$slots.header?(S(),I("div",{key:0,class:C(e.nsSelect.be("dropdown","header")),onClick:j(()=>{},["stop"])},[M(e.$slots,"header")],10,["onClick"])):R("v-if",!0),me(x(y,{id:e.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":e.nsSelect.be("dropdown","wrap"),"view-class":e.nsSelect.be("dropdown","list"),class:C([e.nsSelect.is("empty",e.filteredOptionsCount===0)]),role:"listbox","aria-label":e.ariaLabel,"aria-orientation":"vertical",onScroll:e.popupScroll},{default:B(()=>[e.showNewOption?(S(),Z(c,{key:0,value:e.states.inputValue,created:!0},null,8,["value"])):R("v-if",!0),x(t,null,{default:B(()=>[M(e.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label","onScroll"]),[[Qe,e.states.options.size>0&&!e.loading]]),e.$slots.loading&&e.loading?(S(),I("div",{key:1,class:C(e.nsSelect.be("dropdown","loading"))},[M(e.$slots,"loading")],2)):e.loading||e.filteredOptionsCount===0?(S(),I("div",{key:2,class:C(e.nsSelect.be("dropdown","empty"))},[M(e.$slots,"empty",{},()=>[N("span",null,U(e.emptyText),1)])],2)):R("v-if",!0),e.$slots.footer?(S(),I("div",{key:3,class:C(e.nsSelect.be("dropdown","footer")),onClick:j(()=>{},["stop"])},[M(e.$slots,"footer")],10,["onClick"])):R("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],16,["onMouseleave"])),[[h,e.handleClickOutside,e.popperRef]])}var kn=ge(Sn,[["render",On],["__file","select.vue"]]);const Vn=Y({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(e){const n=ue("select"),s=T(),d=De(),i=T([]);Ml(Nl,X(w({},Ce(e))));const c=f(()=>i.value.some(h=>h.visible===!0)),t=h=>{var b;return h.type.name==="ElOption"&&!!((b=h.component)!=null&&b.proxy)},y=h=>{const b=J(h),v=[];return b.forEach(r=>{var u;ln(r)&&(t(r)?v.push(r.component.proxy):H(r.children)&&r.children.length?v.push(...y(r.children)):(u=r.component)!=null&&u.subTree&&v.push(...y(r.component.subTree)))}),v},o=()=>{i.value=y(d.subTree)};return Be(()=>{o()}),Bt(s,o,{attributes:!0,subtree:!0,childList:!0}),{groupRef:s,visible:c,ns:n}}});function wn(e,n,s,d,i,c){return me((S(),I("ul",{ref:"groupRef",class:C(e.ns.be("group","wrap"))},[N("li",{class:C(e.ns.be("group","title"))},U(e.label),3),N("li",null,[N("ul",{class:C(e.ns.b("group"))},[M(e.$slots,"default")],2)])],2)),[[Qe,e.visible]])}var Rl=ge(Vn,[["render",wn],["__file","option-group.vue"]]);const Ge=El(kn,{Option:Ze,OptionGroup:Rl}),kl=Il(Ze);Il(Rl);const En=(e,{attrs:n,emit:s},{select:d,tree:i,key:c})=>{const t=ue("tree-select");return W(()=>e.data,()=>{e.filterable&&L(()=>{var o,h;(h=i.value)==null||h.filter((o=d.value)==null?void 0:o.states.inputValue)})},{flush:"post"}),A(w(w({},Le(Ce(e),Object.keys(Ge.props))),n),{class:f(()=>n.class),style:f(()=>n.style),"onUpdate:modelValue":o=>s(F,o),valueKey:c,popperClass:f(()=>{const o=[t.e("popper")];return e.popperClass&&o.push(e.popperClass),o.join(" ")}),filterMethod:(o="")=>{var h;e.filterMethod?e.filterMethod(o):e.remoteMethod?e.remoteMethod(o):(h=i.value)==null||h.filter(o)}})},In=Y({extends:kl,setup(e,n){const s=kl.setup(e,n);delete s.selectOptionClick;const d=De().proxy;return L(()=>{s.select.states.cachedOptions.get(d.value)||s.select.onOptionCreate(d)}),W(()=>n.attrs.visible,i=>{L(()=>{s.states.visible=i})},{immediate:!0}),s},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function qe(e){return e||e===0}function Je(e){return H(e)&&e.length}function te(e){return H(e)?e:qe(e)?[e]:[]}function $e(e,n,s,d,i){for(let c=0;c<e.length;c++){const t=e[c];if(n(t,c,e,i))return d?d(t,c,e,i):t;{const y=s(t);if(Je(y)){const o=$e(y,n,s,d,t);if(o)return o}}}}function Re(e,n,s,d){for(let i=0;i<e.length;i++){const c=e[i];n(c,i,e,d);const t=s(c);Je(t)&&Re(t,n,s,c)}}const Tn=(e,{attrs:n,slots:s,emit:d},{select:i,tree:c,key:t})=>{W(()=>e.modelValue,()=>{e.showCheckbox&&L(()=>{const r=c.value;r&&!ie(r.getCheckedKeys(),te(e.modelValue))&&r.setCheckedKeys(te(e.modelValue))})},{immediate:!0,deep:!0});const y=f(()=>w({value:t.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf"},e.props)),o=(r,u)=>{var p;const g=y.value[r];return oe(g)?g(u,(p=c.value)==null?void 0:p.getNode(o("value",u))):u[g]},h=te(e.modelValue).map(r=>$e(e.data||[],u=>o("value",u)===r,u=>o("children",u),(u,p,g,k)=>k&&o("value",k))).filter(r=>qe(r)),b=f(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const r=[];return Re(e.data.concat(e.cacheData),u=>{const p=o("value",u);r.push({value:p,currentLabel:o("label",u),isDisabled:o("disabled",u)})},u=>o("children",u)),r}),v=()=>{var r;return(r=c.value)==null?void 0:r.getCheckedKeys().filter(u=>{var p;const g=(p=c.value)==null?void 0:p.getNode(u);return!zt(g)&&Pt(g.childNodes)})};return A(w(w({},Le(Ce(e),Object.keys(je.props))),n),{nodeKey:t,expandOnClickNode:f(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:f(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(h):h),renderContent:(r,{node:u,data:p,store:g})=>r(In,{value:o("value",p),label:o("label",p),disabled:o("disabled",p),visible:u.visible},e.renderContent?()=>e.renderContent(r,{node:u,data:p,store:g}):s.default?()=>s.default({node:u,data:p,store:g}):void 0),filterNodeMethod:(r,u,p)=>e.filterNodeMethod?e.filterNodeMethod(r,u,p):r?new RegExp(Tl(r),"i").test(o("label",u)||""):!0,onNodeClick:(r,u,p)=>{var g,k,K,P;if((g=n.onNodeClick)==null||g.call(n,r,u,p),!(e.showCheckbox&&e.checkOnClickNode)){if(!e.showCheckbox&&(e.checkStrictly||u.isLeaf)){if(!o("disabled",r)){const G=(k=i.value)==null?void 0:k.states.options.get(o("value",r));(K=i.value)==null||K.handleOptionSelect(G)}}else e.expandOnClickNode&&p.proxy.handleExpandIconClick();(P=i.value)==null||P.focus()}},onCheck:(r,u)=>{var p;if(!e.showCheckbox)return;const g=o("value",r),k={};Re([c.value.store.root],O=>k[O.key]=O,O=>O.childNodes);const K=u.checkedKeys,P=e.multiple?te(e.modelValue).filter(O=>!(O in k)&&!K.includes(O)):[],G=P.concat(K);if(e.checkStrictly)d(F,e.multiple?G:G.includes(g)?g:void 0);else if(e.multiple){const O=v();d(F,P.concat(O))}else{const O=$e([r],z=>!Je(o("children",z))&&!o("disabled",z),z=>o("children",z)),ee=O?o("value",O):void 0,Se=qe(e.modelValue)&&!!$e([r],z=>o("value",z)===e.modelValue,z=>o("children",z));d(F,ee===e.modelValue||Se?void 0:ee)}L(()=>{var O;const ee=te(e.modelValue);c.value.setCheckedKeys(ee),(O=n.onCheck)==null||O.call(n,r,{checkedKeys:c.value.getCheckedKeys(),checkedNodes:c.value.getCheckedNodes(),halfCheckedKeys:c.value.getHalfCheckedKeys(),halfCheckedNodes:c.value.getHalfCheckedNodes()})}),(p=i.value)==null||p.focus()},onNodeExpand:(r,u,p)=>{var g;(g=n.onNodeExpand)==null||g.call(n,r,u,p),L(()=>{if(!e.checkStrictly&&e.lazy&&e.multiple&&u.checked){const k={},K=c.value.getCheckedKeys();Re([c.value.store.root],O=>k[O.key]=O,O=>O.childNodes);const P=te(e.modelValue).filter(O=>!(O in k)&&!K.includes(O)),G=v();d(F,P.concat(G))}})},cacheOptions:b})};var Nn=Y({props:{data:{type:Array,default:()=>[]}},setup(e){const n=be(ye);return W(()=>e.data,()=>{var s;e.data.forEach(i=>{n.states.cachedOptions.has(i.value)||n.states.cachedOptions.set(i.value,i)});const d=((s=n.selectRef)==null?void 0:s.querySelectorAll("input"))||[];wl&&!Array.from(d).includes(document.activeElement)&&n.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const Mn=Y({name:"ElTreeSelect",inheritAttrs:!1,props:A(w(w({},Ge.props),je.props),{cacheData:{type:Array,default:()=>[]}}),setup(e,n){const{slots:s,expose:d}=n,i=T(),c=T(),t=f(()=>e.nodeKey||e.valueKey||"value"),y=En(e,n,{select:i,tree:c,key:t}),v=Tn(e,n,{select:i,tree:c,key:t}),{cacheOptions:o}=v,h=pl(v,["cacheOptions"]),b=X({});return d(b),Be(()=>{Object.assign(b,w(w({},Le(c.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"])),Le(i.value,["focus","blur","selectedLabel"])))}),()=>He(Ge,X(A(w({},y),{ref:r=>i.value=r})),A(w({},s),{default:()=>[He(Nn,{data:o.value}),He(je,X(A(w({},h),{ref:r=>c.value=r})))]}))}});var Kn=ge(Mn,[["__file","tree-select.vue"]]);const _n=El(Kn);export{_n as ElTreeSelect,_n as default};
