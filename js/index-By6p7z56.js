var An=Object.defineProperty,Rn=Object.defineProperties;var Pn=Object.getOwnPropertyDescriptors;var Ue=Object.getOwnPropertySymbols;var Lt=Object.prototype.hasOwnProperty,Bt=Object.prototype.propertyIsEnumerable;var $t=(e,t,l)=>t in e?An(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,L=(e,t)=>{for(var l in t||(t={}))Lt.call(t,l)&&$t(e,l,t[l]);if(Ue)for(var l of Ue(t))Bt.call(t,l)&&$t(e,l,t[l]);return e},Z=(e,t)=>Rn(e,Pn(t));var Mt=(e,t)=>{var l={};for(var o in e)Lt.call(e,o)&&t.indexOf(o)<0&&(l[o]=e[o]);if(e!=null&&Ue)for(var o of Ue(e))t.indexOf(o)<0&&Bt.call(e,o)&&(l[o]=e[o]);return l};var At=(e,t,l)=>new Promise((o,n)=>{var s=d=>{try{c(l.next(d))}catch(y){n(y)}},a=d=>{try{c(l.throw(d))}catch(y){n(y)}},c=d=>d.done?o(d.value):Promise.resolve(d.value).then(s,a);c((l=l.apply(e,t)).next())});import{ay as zn,k as re,l as x,aa as Fn,w as tt,aw as Se,ao as Ke,A as q,a7 as Ne,r as jt,aE as Hn,a4 as qn,s as ge,b0 as Rt,ar as ie,a as Ut,o as Wn,h as jn,aD as Un,j as Ge,v as Gn,M as it,a8 as Qn,q as Yn,t as Le,b1 as Jn,E as Gt,bc as Xn,an as Qt,L as Zn,ap as xn,bd as st,be as _n,O as el,bf as tl,n as nl,aC as ll,p as ol}from"./bootstrap-D_tfqUKa.js";import{d as al,E as sl,u as il,a as dl}from"./index-C5taWQC5.js";import{E as rl}from"./index-jdiio4kd.js";import{e as Yt,f as ul,t as Pt,E as cl,u as fl}from"./index-DiCyFLTI.js";import{d as X,v as U,f as E,E as H,k as z,T as hl,at as pl,u as Ye,y as ne,c as k,p as ye,ao as vl,w as V,z as Oe,N as he,e as I,h as A,t as le,n as N,af as Re,L as de,ac as gl,m as W,g as R,l as Me,r as D,o as Pe,i as Y,$ as yl,a as ae,as as ml,q as pt,ak as Q,a5 as bl,F as oe,P as xe,Q as _e,G as zt,D as Je,au as Cl,ab as be,ar as dt,s as Ae,K as Ft,M as kl}from"../jse/index-index-D3kXd9GM.js";import{c as Ee}from"./isEqual-Cnr9bec3.js";import{b as Jt,u as Nl,a as Sl}from"./use-form-item-Dl8cCtch.js";import{a as El,u as wl}from"./index-BfQoc4Lz.js";import{u as Kl,a as Ol}from"./use-form-common-props-D7VXIJH5.js";import{d as Dl}from"./error-RzLJJULZ.js";import{U as te,C as Xt,u as Tl,p as et}from"./index-CMrTI9dD.js";import{s as Il}from"./scroll-CXToNYqi.js";import{C as Vl}from"./index-Dp4Gx6z2.js";import{ElCheckbox as $l}from"./index-DJTBrukM.js";import"./index-BgWoZ-xU.js";import"./_baseFindIndex-D7XfJLKM.js";import"./_baseIteratee-B-DCD3KA.js";import"./index-LeJpH04g.js";function fe(){if(!arguments.length)return[];var e=arguments[0];return zn(e)?e:[e]}const Ll=X({name:"ElCollapseTransition"}),Bl=X(Z(L({},Ll),{setup(e){const t=x("collapse-transition"),l=n=>{n.style.maxHeight="",n.style.overflow=n.dataset.oldOverflow,n.style.paddingTop=n.dataset.oldPaddingTop,n.style.paddingBottom=n.dataset.oldPaddingBottom},o={beforeEnter(n){n.dataset||(n.dataset={}),n.dataset.oldPaddingTop=n.style.paddingTop,n.dataset.oldPaddingBottom=n.style.paddingBottom,n.style.height&&(n.dataset.elExistsHeight=n.style.height),n.style.maxHeight=0,n.style.paddingTop=0,n.style.paddingBottom=0},enter(n){requestAnimationFrame(()=>{n.dataset.oldOverflow=n.style.overflow,n.dataset.elExistsHeight?n.style.maxHeight=n.dataset.elExistsHeight:n.scrollHeight!==0?n.style.maxHeight=`${n.scrollHeight}px`:n.style.maxHeight=0,n.style.paddingTop=n.dataset.oldPaddingTop,n.style.paddingBottom=n.dataset.oldPaddingBottom,n.style.overflow="hidden"})},afterEnter(n){n.style.maxHeight="",n.style.overflow=n.dataset.oldOverflow},enterCancelled(n){l(n)},beforeLeave(n){n.dataset||(n.dataset={}),n.dataset.oldPaddingTop=n.style.paddingTop,n.dataset.oldPaddingBottom=n.style.paddingBottom,n.dataset.oldOverflow=n.style.overflow,n.style.maxHeight=`${n.scrollHeight}px`,n.style.overflow="hidden"},leave(n){n.scrollHeight!==0&&(n.style.maxHeight=0,n.style.paddingTop=0,n.style.paddingBottom=0)},afterLeave(n){l(n)},leaveCancelled(n){l(n)}};return(n,s)=>(E(),U(Fn,hl({name:Ye(t).b()},pl(o)),{default:H(()=>[z(n.$slots,"default")]),_:3},16,["name"]))}}));var Ml=re(Bl,[["__file","collapse-transition.vue"]]);const Al=tt(Ml),Zt=Symbol("ElSelectGroup"),De=Symbol("ElSelect");function Rl(e,t){const l=ne(De),o=ne(Zt,{disabled:!1}),n=k(()=>f(fe(l.props.modelValue),e.value)),s=k(()=>{var u;if(l.props.multiple){const h=fe((u=l.props.modelValue)!=null?u:[]);return!n.value&&h.length>=l.props.multipleLimit&&l.props.multipleLimit>0}else return!1}),a=k(()=>e.label||(ye(e.value)?"":e.value)),c=k(()=>e.value||e.label||""),d=k(()=>e.disabled||t.groupDisabled||s.value),y=Oe(),f=(u=[],h)=>{if(ye(e.value)){const g=l.props.valueKey;return u&&u.some(C=>vl(Se(C,g))===Se(h,g))}else return u&&u.includes(h)},p=()=>{!e.disabled&&!o.disabled&&(l.states.hoveringIndex=l.optionsArray.indexOf(y.proxy))},r=u=>{const h=new RegExp(Yt(u),"i");t.visible=h.test(a.value)||e.created};return V(()=>a.value,()=>{!e.created&&!l.props.remote&&l.setSelected()}),V(()=>e.value,(u,h)=>{const{remote:g,valueKey:C}=l.props;if((g?u!==h:!Ee(u,h))&&(l.onOptionDestroy(h,y.proxy),l.onOptionCreate(y.proxy)),!e.created&&!g){if(C&&ye(u)&&ye(h)&&u[C]===h[C])return;l.setSelected()}}),V(()=>o.disabled,()=>{t.groupDisabled=o.disabled},{immediate:!0}),{select:l,currentLabel:a,currentValue:c,itemSelected:n,isDisabled:d,hoverItem:p,updateOption:r}}const Pl=X({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(e){const t=x("select"),l=Jt(),o=k(()=>[t.be("dropdown","item"),t.is("disabled",Ye(c)),t.is("selected",Ye(a)),t.is("hovering",Ye(r))]),n=de({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:s,itemSelected:a,isDisabled:c,select:d,hoverItem:y,updateOption:f}=Rl(e,n),{visible:p,hover:r}=Re(n),u=Oe().proxy;d.onOptionCreate(u),gl(()=>{const g=u.value,{selected:C}=d.states,T=C.some($=>$.value===u.value);W(()=>{d.states.cachedOptions.get(g)===u&&!T&&d.states.cachedOptions.delete(g)}),d.onOptionDestroy(g,u)});function h(){c.value||d.handleOptionSelect(u)}return{ns:t,id:l,containerKls:o,currentLabel:s,itemSelected:a,isDisabled:c,select:d,hoverItem:y,updateOption:f,visible:p,hover:r,selectOptionClick:h,states:n}}});function zl(e,t,l,o,n,s){return he((E(),I("li",{id:e.id,class:N(e.containerKls),role:"option","aria-disabled":e.isDisabled||void 0,"aria-selected":e.itemSelected,onMousemove:e.hoverItem,onClick:q(e.selectOptionClick,["stop"])},[z(e.$slots,"default",{},()=>[A("span",null,le(e.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMousemove","onClick"])),[[Ke,e.visible]])}var vt=re(Pl,[["render",zl],["__file","option.vue"]]);const Fl=X({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const e=ne(De),t=x("select"),l=k(()=>e.props.popperClass),o=k(()=>e.props.multiple),n=k(()=>e.props.fitInputWidth),s=D("");function a(){var c;s.value=`${(c=e.selectRef)==null?void 0:c.offsetWidth}px`}return Pe(()=>{a(),Ne(e.selectRef,a)}),{ns:t,minWidth:s,popperClass:l,isMultiple:o,isFitInputWidth:n}}});function Hl(e,t,l,o,n,s){return E(),I("div",{class:N([e.ns.b("dropdown"),e.ns.is("multiple",e.isMultiple),e.popperClass]),style:Me({[e.isFitInputWidth?"width":"minWidth"]:e.minWidth})},[e.$slots.header?(E(),I("div",{key:0,class:N(e.ns.be("dropdown","header"))},[z(e.$slots,"header")],2)):R("v-if",!0),z(e.$slots,"default"),e.$slots.footer?(E(),I("div",{key:1,class:N(e.ns.be("dropdown","footer"))},[z(e.$slots,"footer")],2)):R("v-if",!0)],6)}var ql=re(Fl,[["render",Hl],["__file","select-dropdown.vue"]]);const Wl=(e,t)=>{const{t:l}=jt(),o=Jt(),n=x("select"),s=x("input"),a=de({inputValue:"",options:new Map,cachedOptions:new Map,optionValues:[],selected:[],selectionWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),c=D(null),d=D(null),y=D(null),f=D(null),p=D(null),r=D(null),u=D(null),h=D(null),g=D(null),C=D(null),T=D(null),{isComposing:$,handleCompositionStart:F,handleCompositionUpdate:K,handleCompositionEnd:B}=El({afterComposition:i=>wt(i)}),{wrapperRef:se,isFocused:j,handleBlur:ue}=wl(p,{beforeFocus(){return pe.value},afterFocus(){e.automaticDropdown&&!m.value&&(m.value=!0,a.menuVisibleOnFocus=!0)},beforeBlur(i){var v,S;return((v=y.value)==null?void 0:v.isFocusInsideContent(i))||((S=f.value)==null?void 0:S.isFocusInsideContent(i))},afterBlur(){m.value=!1,a.menuVisibleOnFocus=!1}}),m=D(!1),w=D(),{form:P,formItem:_}=Nl(),{inputId:nt}=Sl(e,{formItemContext:_}),{valueOnClear:lt,isEmptyValue:ot}=Hn(e),pe=k(()=>e.disabled||(P==null?void 0:P.disabled)),Te=k(()=>Y(e.modelValue)?e.modelValue.length>0:!ot(e.modelValue)),b=k(()=>{var i;return(i=P==null?void 0:P.statusIcon)!=null?i:!1}),O=k(()=>e.clearable&&!pe.value&&a.inputHovering&&Te.value),ee=k(()=>e.remote&&e.filterable&&!e.remoteShowSuffix?"":e.suffixIcon),ve=k(()=>n.is("reverse",ee.value&&m.value)),mt=k(()=>(_==null?void 0:_.validateState)||""),tn=k(()=>qn[mt.value]),nn=k(()=>e.remote?300:0),ln=k(()=>e.remote&&!a.inputValue&&a.options.size===0),on=k(()=>e.loading?e.loadingText||l("el.select.loading"):e.filterable&&a.inputValue&&a.options.size>0&&Ie.value===0?e.noMatchText||l("el.select.noMatch"):a.options.size===0?e.noDataText||l("el.select.noData"):null),Ie=k(()=>G.value.filter(i=>i.visible).length),G=k(()=>{const i=Array.from(a.options.values()),v=[];return a.optionValues.forEach(S=>{const M=i.findIndex(J=>J.value===S);M>-1&&v.push(i[M])}),v.length>=i.length?v:i}),an=k(()=>Array.from(a.cachedOptions.values())),sn=k(()=>{const i=G.value.filter(v=>!v.created).some(v=>v.currentLabel===a.inputValue);return e.filterable&&e.allowCreate&&a.inputValue!==""&&!i}),bt=()=>{e.filterable&&ae(e.filterMethod)||e.filterable&&e.remote&&ae(e.remoteMethod)||G.value.forEach(i=>{var v;(v=i.updateOption)==null||v.call(i,a.inputValue)})},Ct=Kl(),dn=k(()=>["small"].includes(Ct.value)?"small":"default"),rn=k({get(){return m.value&&!ln.value},set(i){m.value=i}}),un=k(()=>{if(e.multiple&&!ge(e.modelValue))return fe(e.modelValue).length===0&&!a.inputValue;const i=Y(e.modelValue)?e.modelValue[0]:e.modelValue;return e.filterable||ge(i)?!a.inputValue:!0}),cn=k(()=>{var i;const v=(i=e.placeholder)!=null?i:l("el.select.placeholder");return e.multiple||!Te.value?v:a.selectedLabel}),fn=k(()=>Rt?null:"mouseenter");V(()=>e.modelValue,(i,v)=>{e.multiple&&e.filterable&&!e.reserveKeyword&&(a.inputValue="",ze("")),Fe(),!Ee(i,v)&&e.validateEvent&&(_==null||_.validate("change").catch(S=>Dl()))},{flush:"post",deep:!0}),V(()=>m.value,i=>{i?ze(a.inputValue):(a.inputValue="",a.previousQuery=null,a.isBeforeHide=!0),t("visible-change",i)}),V(()=>a.options.entries(),()=>{Ut&&(Fe(),e.defaultFirstOption&&(e.filterable||e.remote)&&Ie.value&&kt())},{flush:"post"}),V([()=>a.hoveringIndex,G],([i])=>{Wn(i)&&i>-1?w.value=G.value[i]||{}:w.value={},G.value.forEach(v=>{v.hover=w.value===v})}),yl(()=>{a.isBeforeHide||bt()});const ze=i=>{a.previousQuery===i||$.value||(a.previousQuery=i,e.filterable&&ae(e.filterMethod)?e.filterMethod(i):e.filterable&&e.remote&&ae(e.remoteMethod)&&e.remoteMethod(i),e.defaultFirstOption&&(e.filterable||e.remote)&&Ie.value?W(kt):W(hn))},kt=()=>{const i=G.value.filter(J=>J.visible&&!J.disabled&&!J.states.groupDisabled),v=i.find(J=>J.created),S=i[0],M=G.value.map(J=>J.value);a.hoveringIndex=Tt(M,v||S)},Fe=()=>{if(e.multiple)a.selectedLabel="";else{const v=Y(e.modelValue)?e.modelValue[0]:e.modelValue,S=Nt(v);a.selectedLabel=S.currentLabel,a.selected=[S];return}const i=[];ge(e.modelValue)||fe(e.modelValue).forEach(v=>{i.push(Nt(v))}),a.selected=i},Nt=i=>{let v;const S=ml(i);for(let Ce=a.cachedOptions.size-1;Ce>=0;Ce--){const ce=an.value[Ce];if(S?Se(ce.value,e.valueKey)===Se(i,e.valueKey):ce.value===i){v={value:i,currentLabel:ce.currentLabel,get isDisabled(){return ce.isDisabled}};break}}if(v)return v;const M=S?i.label:i!=null?i:"";return{value:i,currentLabel:M}},hn=()=>{a.hoveringIndex=G.value.findIndex(i=>a.selected.some(v=>We(v)===We(i)))},pn=()=>{a.selectionWidth=d.value.getBoundingClientRect().width},vn=()=>{a.collapseItemWidth=C.value.getBoundingClientRect().width},at=()=>{var i,v;(v=(i=y.value)==null?void 0:i.updatePopper)==null||v.call(i)},St=()=>{var i,v;(v=(i=f.value)==null?void 0:i.updatePopper)==null||v.call(i)},Et=()=>{a.inputValue.length>0&&!m.value&&(m.value=!0),ze(a.inputValue)},wt=i=>{if(a.inputValue=i.target.value,e.remote)Kt();else return Et()},Kt=al(()=>{Et()},nn.value),Ve=i=>{Ee(e.modelValue,i)||t(Xt,i)},gn=i=>ul(i,v=>{const S=a.cachedOptions.get(v);return S&&!S.disabled&&!S.states.groupDisabled}),yn=i=>{if(e.multiple&&i.code!==ie.delete&&i.target.value.length<=0){const v=fe(e.modelValue).slice(),S=gn(v);if(S<0)return;const M=v[S];v.splice(S,1),t(te,v),Ve(v),t("remove-tag",M)}},mn=(i,v)=>{const S=a.selected.indexOf(v);if(S>-1&&!pe.value){const M=fe(e.modelValue).slice();M.splice(S,1),t(te,M),Ve(M),t("remove-tag",v.value)}i.stopPropagation(),qe()},Ot=i=>{i.stopPropagation();const v=e.multiple?[]:lt.value;if(e.multiple)for(const S of a.selected)S.isDisabled&&v.push(S.value);t(te,v),Ve(v),a.hoveringIndex=-1,m.value=!1,t("clear"),qe()},Dt=i=>{var v;if(e.multiple){const S=fe((v=e.modelValue)!=null?v:[]).slice(),M=Tt(S,i);M>-1?S.splice(M,1):(e.multipleLimit<=0||S.length<e.multipleLimit)&&S.push(i.value),t(te,S),Ve(S),i.created&&ze(""),e.filterable&&!e.reserveKeyword&&(a.inputValue="")}else t(te,i.value),Ve(i.value),m.value=!1;qe(),!m.value&&W(()=>{He(i)})},Tt=(i=[],v)=>ge(v)?-1:ye(v.value)?i.findIndex(S=>Ee(Se(S,e.valueKey),We(v))):i.indexOf(v.value),He=i=>{var v,S,M,J,Ce;const ce=Y(i)?i[0]:i;let je=null;if(ce!=null&&ce.value){const $e=G.value.filter(Mn=>Mn.value===ce.value);$e.length>0&&(je=$e[0].$el)}if(y.value&&je){const $e=(J=(M=(S=(v=y.value)==null?void 0:v.popperRef)==null?void 0:S.contentRef)==null?void 0:M.querySelector)==null?void 0:J.call(M,`.${n.be("dropdown","wrap")}`);$e&&Il($e,je)}(Ce=T.value)==null||Ce.handleScroll()},bn=i=>{a.options.set(i.value,i),a.cachedOptions.set(i.value,i)},Cn=(i,v)=>{a.options.get(i)===v&&a.options.delete(i)},kn=k(()=>{var i,v;return(v=(i=y.value)==null?void 0:i.popperRef)==null?void 0:v.contentRef}),Nn=()=>{a.isBeforeHide=!1,W(()=>{var i;(i=T.value)==null||i.update(),He(a.selected)})},qe=()=>{var i;(i=p.value)==null||i.focus()},Sn=()=>{var i;if(m.value){m.value=!1,W(()=>{var v;return(v=p.value)==null?void 0:v.blur()});return}(i=p.value)==null||i.blur()},En=i=>{Ot(i)},wn=i=>{if(m.value=!1,j.value){const v=new FocusEvent("focus",i);W(()=>ue(v))}},Kn=()=>{a.inputValue.length>0?a.inputValue="":m.value=!1},It=()=>{pe.value||(Rt&&(a.inputHovering=!0),a.menuVisibleOnFocus?a.menuVisibleOnFocus=!1:m.value=!m.value)},On=()=>{if(!m.value)It();else{const i=G.value[a.hoveringIndex];i&&!i.isDisabled&&Dt(i)}},We=i=>ye(i.value)?Se(i.value,e.valueKey):i.value,Dn=k(()=>G.value.filter(i=>i.visible).every(i=>i.isDisabled)),Tn=k(()=>e.multiple?e.collapseTags?a.selected.slice(0,e.maxCollapseTags):a.selected:[]),In=k(()=>e.multiple?e.collapseTags?a.selected.slice(e.maxCollapseTags):[]:[]),Vt=i=>{if(!m.value){m.value=!0;return}if(!(a.options.size===0||Ie.value===0||$.value)&&!Dn.value){i==="next"?(a.hoveringIndex++,a.hoveringIndex===a.options.size&&(a.hoveringIndex=0)):i==="prev"&&(a.hoveringIndex--,a.hoveringIndex<0&&(a.hoveringIndex=a.options.size-1));const v=G.value[a.hoveringIndex];(v.isDisabled||!v.visible)&&Vt(i),W(()=>He(w.value))}},Vn=()=>{if(!d.value)return 0;const i=window.getComputedStyle(d.value);return Number.parseFloat(i.gap||"6px")},$n=k(()=>{const i=Vn();return{maxWidth:`${C.value&&e.maxCollapseTags===1?a.selectionWidth-a.collapseItemWidth-i:a.selectionWidth}px`}}),Ln=k(()=>({maxWidth:`${a.selectionWidth}px`})),Bn=i=>{t("popup-scroll",i)};return Ne(d,pn),Ne(h,at),Ne(se,at),Ne(g,St),Ne(C,vn),Pe(()=>{Fe()}),{inputId:nt,contentId:o,nsSelect:n,nsInput:s,states:a,isFocused:j,expanded:m,optionsArray:G,hoverOption:w,selectSize:Ct,filteredOptionsCount:Ie,updateTooltip:at,updateTagTooltip:St,debouncedOnInputChange:Kt,onInput:wt,deletePrevTag:yn,deleteTag:mn,deleteSelected:Ot,handleOptionSelect:Dt,scrollToOption:He,hasModelValue:Te,shouldShowPlaceholder:un,currentPlaceholder:cn,mouseEnterEventName:fn,needStatusIcon:b,showClose:O,iconComponent:ee,iconReverse:ve,validateState:mt,validateIcon:tn,showNewOption:sn,updateOptions:bt,collapseTagSize:dn,setSelected:Fe,selectDisabled:pe,emptyText:on,handleCompositionStart:F,handleCompositionUpdate:K,handleCompositionEnd:B,onOptionCreate:bn,onOptionDestroy:Cn,handleMenuEnter:Nn,focus:qe,blur:Sn,handleClearClick:En,handleClickOutside:wn,handleEsc:Kn,toggleMenu:It,selectOption:On,getValueKey:We,navigateOptions:Vt,dropdownMenuVisible:rn,showTagList:Tn,collapseTagList:In,popupScroll:Bn,tagStyle:$n,collapseTagStyle:Ln,popperRef:kn,inputRef:p,tooltipRef:y,tagTooltipRef:f,prefixRef:r,suffixRef:u,selectRef:c,wrapperRef:se,selectionRef:d,scrollbarRef:T,menuRef:h,tagMenuRef:g,collapseItemRef:C}};var jl=X({name:"ElOptions",setup(e,{slots:t}){const l=ne(De);let o=[];return()=>{var n,s;const a=(n=t.default)==null?void 0:n.call(t),c=[];function d(y){Y(y)&&y.forEach(f=>{var p,r,u,h;const g=(p=(f==null?void 0:f.type)||{})==null?void 0:p.name;g==="ElOptionGroup"?d(!pt(f.children)&&!Y(f.children)&&ae((r=f.children)==null?void 0:r.default)?(u=f.children)==null?void 0:u.default():f.children):g==="ElOption"?c.push((h=f.props)==null?void 0:h.value):Y(f.children)&&d(f.children)})}return a.length&&d((s=a[0])==null?void 0:s.children),Ee(c,o)||(o=c,l&&(l.states.optionValues=c)),a}}});const Ul=jn(L(L({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:Yn,effect:{type:Ge(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Ge(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:il.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:it,default:Qn},fitInputWidth:Boolean,suffixIcon:{type:it,default:Gn},tagType:Z(L({},Pt.type),{default:"info"}),tagEffect:Z(L({},Pt.effect),{default:"light"}),validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,showArrow:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:Ge(String),values:sl,default:"bottom-start"},fallbackPlacements:{type:Ge(Array),default:["bottom-start","top-start","right","left"]},tabindex:{type:[String,Number],default:0},appendTo:String},Un),Tl(["ariaLabel"]))),Ht="ElSelect",Gl=X({name:Ht,componentName:Ht,components:{ElSelectMenu:ql,ElOption:vt,ElOptions:jl,ElTag:cl,ElScrollbar:rl,ElTooltip:dl,ElIcon:Gt},directives:{ClickOutside:Vl},props:Ul,emits:[te,Xt,"remove-tag","clear","visible-change","focus","blur","popup-scroll"],setup(e,{emit:t}){const l=k(()=>{const{modelValue:d,multiple:y}=e,f=y?[]:void 0;return Y(d)?y?d:f:y?f:d}),o=de(Z(L({},Re(e)),{modelValue:l})),n=Wl(o,t),{calculatorRef:s,inputStyle:a}=fl();be(De,de({props:o,states:n.states,optionsArray:n.optionsArray,handleOptionSelect:n.handleOptionSelect,onOptionCreate:n.onOptionCreate,onOptionDestroy:n.onOptionDestroy,selectRef:n.selectRef,setSelected:n.setSelected}));const c=k(()=>e.multiple?n.states.selected.map(d=>d.currentLabel):n.states.selectedLabel);return Z(L({},n),{modelValue:l,selectedLabel:c,calculatorRef:s,inputStyle:a})}});function Ql(e,t,l,o,n,s){const a=Q("el-tag"),c=Q("el-tooltip"),d=Q("el-icon"),y=Q("el-option"),f=Q("el-options"),p=Q("el-scrollbar"),r=Q("el-select-menu"),u=bl("click-outside");return he((E(),I("div",{ref:"selectRef",class:N([e.nsSelect.b(),e.nsSelect.m(e.selectSize)]),[Cl(e.mouseEnterEventName)]:h=>e.states.inputHovering=!0,onMouseleave:h=>e.states.inputHovering=!1},[oe(c,{ref:"tooltipRef",visible:e.dropdownMenuVisible,placement:e.placement,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,pure:"",trigger:"click",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:e.persistent,"append-to":e.appendTo,"show-arrow":e.showArrow,offset:e.offset,onBeforeShow:e.handleMenuEnter,onHide:h=>e.states.isBeforeHide=!1},{default:H(()=>{var h;return[A("div",{ref:"wrapperRef",class:N([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled)]),onClick:q(e.toggleMenu,["prevent"])},[e.$slots.prefix?(E(),I("div",{key:0,ref:"prefixRef",class:N(e.nsSelect.e("prefix"))},[z(e.$slots,"prefix")],2)):R("v-if",!0),A("div",{ref:"selectionRef",class:N([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.$slots.prefix&&!!e.states.selected.length)])},[e.multiple?z(e.$slots,"tag",{key:0},()=>[(E(!0),I(xe,null,_e(e.showTagList,g=>(E(),I("div",{key:e.getValueKey(g),class:N(e.nsSelect.e("selected-item"))},[oe(a,{closable:!e.selectDisabled&&!g.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:Me(e.tagStyle),onClose:C=>e.deleteTag(C,g)},{default:H(()=>[A("span",{class:N(e.nsSelect.e("tags-text"))},[z(e.$slots,"label",{label:g.currentLabel,value:g.value},()=>[zt(le(g.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),e.collapseTags&&e.states.selected.length>e.maxCollapseTags?(E(),U(c,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:H(()=>[A("div",{ref:"collapseItemRef",class:N(e.nsSelect.e("selected-item"))},[oe(a,{closable:!1,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:Me(e.collapseTagStyle)},{default:H(()=>[A("span",{class:N(e.nsSelect.e("tags-text"))}," + "+le(e.states.selected.length-e.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:H(()=>[A("div",{ref:"tagMenuRef",class:N(e.nsSelect.e("selection"))},[(E(!0),I(xe,null,_e(e.collapseTagList,g=>(E(),I("div",{key:e.getValueKey(g),class:N(e.nsSelect.e("selected-item"))},[oe(a,{class:"in-tooltip",closable:!e.selectDisabled&&!g.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:C=>e.deleteTag(C,g)},{default:H(()=>[A("span",{class:N(e.nsSelect.e("tags-text"))},[z(e.$slots,"label",{label:g.currentLabel,value:g.value},()=>[zt(le(g.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):R("v-if",!0)]):R("v-if",!0),A("div",{class:N([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable)])},[he(A("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":g=>e.states.inputValue=g,type:"text",name:e.name,class:N([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,autocomplete:e.autocomplete,style:Me(e.inputStyle),tabindex:e.tabindex,role:"combobox",readonly:!e.filterable,spellcheck:"false","aria-activedescendant":((h=e.hoverOption)==null?void 0:h.id)||"","aria-controls":e.contentId,"aria-expanded":e.dropdownMenuVisible,"aria-label":e.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[Le(q(g=>e.navigateOptions("next"),["stop","prevent"]),["down"]),Le(q(g=>e.navigateOptions("prev"),["stop","prevent"]),["up"]),Le(q(e.handleEsc,["stop","prevent"]),["esc"]),Le(q(e.selectOption,["stop","prevent"]),["enter"]),Le(q(e.deletePrevTag,["stop"]),["delete"])],onCompositionstart:e.handleCompositionStart,onCompositionupdate:e.handleCompositionUpdate,onCompositionend:e.handleCompositionEnd,onInput:e.onInput,onClick:q(e.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","tabindex","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[Jn,e.states.inputValue]]),e.filterable?(E(),I("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:N(e.nsSelect.e("input-calculator")),textContent:le(e.states.inputValue)},null,10,["textContent"])):R("v-if",!0)],2),e.shouldShowPlaceholder?(E(),I("div",{key:1,class:N([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue)])},[e.hasModelValue?z(e.$slots,"label",{key:0,label:e.currentPlaceholder,value:e.modelValue},()=>[A("span",null,le(e.currentPlaceholder),1)]):(E(),I("span",{key:1},le(e.currentPlaceholder),1))],2)):R("v-if",!0)],2),A("div",{ref:"suffixRef",class:N(e.nsSelect.e("suffix"))},[e.iconComponent&&!e.showClose?(E(),U(d,{key:0,class:N([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.iconReverse])},{default:H(()=>[(E(),U(Je(e.iconComponent)))]),_:1},8,["class"])):R("v-if",!0),e.showClose&&e.clearIcon?(E(),U(d,{key:1,class:N([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.nsSelect.e("clear")]),onClick:e.handleClearClick},{default:H(()=>[(E(),U(Je(e.clearIcon)))]),_:1},8,["class","onClick"])):R("v-if",!0),e.validateState&&e.validateIcon&&e.needStatusIcon?(E(),U(d,{key:2,class:N([e.nsInput.e("icon"),e.nsInput.e("validateIcon"),e.nsInput.is("loading",e.validateState==="validating")])},{default:H(()=>[(E(),U(Je(e.validateIcon)))]),_:1},8,["class"])):R("v-if",!0)],2)],10,["onClick"])]}),content:H(()=>[oe(r,{ref:"menuRef"},{default:H(()=>[e.$slots.header?(E(),I("div",{key:0,class:N(e.nsSelect.be("dropdown","header")),onClick:q(()=>{},["stop"])},[z(e.$slots,"header")],10,["onClick"])):R("v-if",!0),he(oe(p,{id:e.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":e.nsSelect.be("dropdown","wrap"),"view-class":e.nsSelect.be("dropdown","list"),class:N([e.nsSelect.is("empty",e.filteredOptionsCount===0)]),role:"listbox","aria-label":e.ariaLabel,"aria-orientation":"vertical",onScroll:e.popupScroll},{default:H(()=>[e.showNewOption?(E(),U(y,{key:0,value:e.states.inputValue,created:!0},null,8,["value"])):R("v-if",!0),oe(f,null,{default:H(()=>[z(e.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label","onScroll"]),[[Ke,e.states.options.size>0&&!e.loading]]),e.$slots.loading&&e.loading?(E(),I("div",{key:1,class:N(e.nsSelect.be("dropdown","loading"))},[z(e.$slots,"loading")],2)):e.loading||e.filteredOptionsCount===0?(E(),I("div",{key:2,class:N(e.nsSelect.be("dropdown","empty"))},[z(e.$slots,"empty",{},()=>[A("span",null,le(e.emptyText),1)])],2)):R("v-if",!0),e.$slots.footer?(E(),I("div",{key:3,class:N(e.nsSelect.be("dropdown","footer")),onClick:q(()=>{},["stop"])},[z(e.$slots,"footer")],10,["onClick"])):R("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],16,["onMouseleave"])),[[u,e.handleClickOutside,e.popperRef]])}var Yl=re(Gl,[["render",Ql],["__file","select.vue"]]);const Jl=X({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(e){const t=x("select"),l=D(null),o=Oe(),n=D([]);be(Zt,de(L({},Re(e))));const s=k(()=>n.value.some(y=>y.visible===!0)),a=y=>{var f,p;return((f=y.type)==null?void 0:f.name)==="ElOption"&&!!((p=y.component)!=null&&p.proxy)},c=y=>{const f=fe(y),p=[];return f.forEach(r=>{var u,h;a(r)?p.push(r.component.proxy):(u=r.children)!=null&&u.length?p.push(...c(r.children)):(h=r.component)!=null&&h.subTree&&p.push(...c(r.component.subTree))}),p},d=()=>{n.value=c(o.subTree)};return Pe(()=>{d()}),Xn(l,d,{attributes:!0,subtree:!0,childList:!0}),{groupRef:l,visible:s,ns:t}}});function Xl(e,t,l,o,n,s){return he((E(),I("ul",{ref:"groupRef",class:N(e.ns.be("group","wrap"))},[A("li",{class:N(e.ns.be("group","title"))},le(e.label),3),A("li",null,[A("ul",{class:N(e.ns.b("group"))},[z(e.$slots,"default")],2)])],2)),[[Ke,e.visible]])}var xt=re(Jl,[["render",Xl],["__file","option-group.vue"]]);const rt=tt(Yl,{Option:vt,OptionGroup:xt}),qt=Qt(vt);Qt(xt);const we="$treeNodeId",Wt=function(e,t){!t||t[we]||Object.defineProperty(t,we,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},gt=(e,t)=>t==null?void 0:t[e||we],ut=(e,t,l)=>{const o=e.value.currentNode;l();const n=e.value.currentNode;o!==n&&t("current-change",n?n.data:null,n)},ct=e=>{let t=!0,l=!0,o=!0;for(let n=0,s=e.length;n<s;n++){const a=e[n];(a.checked!==!0||a.indeterminate)&&(t=!1,a.disabled||(o=!1)),(a.checked!==!1||a.indeterminate)&&(l=!1)}return{all:t,none:l,allWithoutDisable:o,half:!t&&!l}},Be=function(e){if(e.childNodes.length===0||e.loading)return;const{all:t,none:l,half:o}=ct(e.childNodes);t?(e.checked=!0,e.indeterminate=!1):o?(e.checked=!1,e.indeterminate=!0):l&&(e.checked=!1,e.indeterminate=!1);const n=e.parent;!n||n.level===0||e.store.checkStrictly||Be(n)},Qe=function(e,t){const l=e.store.props,o=e.data||{},n=l[t];if(ae(n))return n(o,e);if(pt(n))return o[n];if(ge(n)){const s=o[t];return s===void 0?"":s}};let Zl=0;class me{constructor(t){this.id=Zl++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const l in t)dt(t,l)&&(this[l]=t[l]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const t=this.store;if(!t)throw new Error("[Node]store is required!");t.registerNode(this);const l=t.props;if(l&&typeof l.isLeaf!="undefined"){const s=Qe(this,"isLeaf");Zn(s)&&(this.isLeafByUser=s)}if(t.lazy!==!0&&this.data?(this.setData(this.data),t.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&t.lazy&&t.defaultExpandAll&&!this.isLeafByUser&&this.expand(),Y(this.data)||Wt(this,this.data),!this.data)return;const o=t.defaultExpandedKeys,n=t.key;n&&o&&o.includes(this.key)&&this.expand(null,t.autoExpandParent),n&&t.currentNodeKey!==void 0&&this.key===t.currentNodeKey&&(t.currentNode=this,t.currentNode.isCurrent=!0),t.lazy&&t._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(t){Y(t)||Wt(this,t),this.data=t,this.childNodes=[];let l;this.level===0&&Y(this.data)?l=this.data:l=Qe(this,"children")||[];for(let o=0,n=l.length;o<n;o++)this.insertChild({data:l[o]})}get label(){return Qe(this,"label")}get key(){const t=this.store.key;return this.data?this.data[t]:null}get disabled(){return Qe(this,"disabled")}get nextSibling(){const t=this.parent;if(t){const l=t.childNodes.indexOf(this);if(l>-1)return t.childNodes[l+1]}return null}get previousSibling(){const t=this.parent;if(t){const l=t.childNodes.indexOf(this);if(l>-1)return l>0?t.childNodes[l-1]:null}return null}contains(t,l=!0){return(this.childNodes||[]).some(o=>o===t||l&&o.contains(t))}remove(){const t=this.parent;t&&t.removeChild(this)}insertChild(t,l,o){if(!t)throw new Error("InsertChild error: child is required.");if(!(t instanceof me)){if(!o){const n=this.getChildren(!0);n.includes(t.data)||(ge(l)||l<0?n.push(t.data):n.splice(l,0,t.data))}Object.assign(t,{parent:this,store:this.store}),t=de(new me(t)),t instanceof me&&t.initialize()}t.level=this.level+1,ge(l)||l<0?this.childNodes.push(t):this.childNodes.splice(l,0,t),this.updateLeafState()}insertBefore(t,l){let o;l&&(o=this.childNodes.indexOf(l)),this.insertChild(t,o)}insertAfter(t,l){let o;l&&(o=this.childNodes.indexOf(l),o!==-1&&(o+=1)),this.insertChild(t,o)}removeChild(t){const l=this.getChildren()||[],o=l.indexOf(t.data);o>-1&&l.splice(o,1);const n=this.childNodes.indexOf(t);n>-1&&(this.store&&this.store.deregisterNode(t),t.parent=null,this.childNodes.splice(n,1)),this.updateLeafState()}removeChildByData(t){let l=null;for(let o=0;o<this.childNodes.length;o++)if(this.childNodes[o].data===t){l=this.childNodes[o];break}l&&this.removeChild(l)}expand(t,l){const o=()=>{if(l){let n=this.parent;for(;n.level>0;)n.expanded=!0,n=n.parent}this.expanded=!0,t&&t(),this.childNodes.forEach(n=>{n.canFocus=!0})};this.shouldLoadData()?this.loadData(n=>{Y(n)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Be(this),o())}):o()}doCreateChildren(t,l={}){t.forEach(o=>{this.insertChild(Object.assign({data:o},l),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(t=>{t.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser!="undefined"){this.isLeaf=this.isLeafByUser;return}const t=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!t||t.length===0;return}this.isLeaf=!1}setChecked(t,l,o,n){if(this.indeterminate=t==="half",this.checked=t===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:a,allWithoutDisable:c}=ct(this.childNodes);!this.isLeaf&&!a&&c&&(this.checked=!1,t=!1);const d=()=>{if(l){const y=this.childNodes;for(let r=0,u=y.length;r<u;r++){const h=y[r];n=n||t!==!1;const g=h.disabled?h.checked:n;h.setChecked(g,l,!0,n)}const{half:f,all:p}=ct(y);p||(this.checked=p,this.indeterminate=f)}};if(this.shouldLoadData()){this.loadData(()=>{d(),Be(this)},{checked:t!==!1});return}else d()}const s=this.parent;!s||s.level===0||o||Be(s)}getChildren(t=!1){if(this.level===0)return this.data;const l=this.data;if(!l)return null;const o=this.store.props;let n="children";return o&&(n=o.children||"children"),l[n]===void 0&&(l[n]=null),t&&!l[n]&&(l[n]=[]),l[n]}updateChildren(){const t=this.getChildren()||[],l=this.childNodes.map(s=>s.data),o={},n=[];t.forEach((s,a)=>{const c=s[we];!!c&&l.findIndex(y=>y[we]===c)>=0?o[c]={index:a,data:s}:n.push({index:a,data:s})}),this.store.lazy||l.forEach(s=>{o[s[we]]||this.removeChildByData(s)}),n.forEach(({index:s,data:a})=>{this.insertChild({data:a},s)}),this.updateLeafState()}loadData(t,l={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(l).length)){this.loading=!0;const o=s=>{this.childNodes=[],this.doCreateChildren(s,l),this.loaded=!0,this.loading=!1,this.updateLeafState(),t&&t.call(this,s)},n=()=>{this.loading=!1};this.store.load(this,o,n)}else t&&t.call(this)}eachNode(t){const l=[this];for(;l.length;){const o=l.shift();l.unshift(...o.childNodes),t(o)}}reInitChecked(){this.store.checkStrictly||Be(this)}}class xl{constructor(t){this.currentNode=null,this.currentNodeKey=null;for(const l in t)dt(t,l)&&(this[l]=t[l]);this.nodesMap={}}initialize(){if(this.root=new me({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const t=this.load;t(this.root,l=>{this.root.doCreateChildren(l),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(t){const l=this.filterNodeMethod,o=this.lazy,n=function(s){return At(this,null,function*(){const a=s.root?s.root.childNodes:s.childNodes;for(const[c,d]of a.entries())d.visible=l.call(d,t,d.data,d),c%80===0&&c>0&&(yield W()),n(d);if(!s.visible&&a.length){let c=!0;c=!a.some(d=>d.visible),s.root?s.root.visible=c===!1:s.visible=c===!1}t&&s.visible&&!s.isLeaf&&(!o||s.loaded)&&s.expand()})};n(this)}setData(t){t!==this.root.data?(this.nodesMap={},this.root.setData(t),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(t){if(t instanceof me)return t;const l=ye(t)?gt(this.key,t):t;return this.nodesMap[l]||null}insertBefore(t,l){const o=this.getNode(l);o.parent.insertBefore({data:t},o)}insertAfter(t,l){const o=this.getNode(l);o.parent.insertAfter({data:t},o)}remove(t){const l=this.getNode(t);l&&l.parent&&(l===this.currentNode&&(this.currentNode=null),l.parent.removeChild(l))}append(t,l){const o=xn(l)?this.root:this.getNode(l);o&&o.insertChild({data:t})}_initDefaultCheckedNodes(){const t=this.defaultCheckedKeys||[],l=this.nodesMap;t.forEach(o=>{const n=l[o];n&&n.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(t){(this.defaultCheckedKeys||[]).includes(t.key)&&t.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(t){t!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=t,this._initDefaultCheckedNodes())}registerNode(t){const l=this.key;!t||!t.data||(l?t.key!==void 0&&(this.nodesMap[t.key]=t):this.nodesMap[t.id]=t)}deregisterNode(t){!this.key||!t||!t.data||(t.childNodes.forEach(o=>{this.deregisterNode(o)}),delete this.nodesMap[t.key])}getCheckedNodes(t=!1,l=!1){const o=[],n=function(s){(s.root?s.root.childNodes:s.childNodes).forEach(c=>{(c.checked||l&&c.indeterminate)&&(!t||t&&c.isLeaf)&&o.push(c.data),n(c)})};return n(this),o}getCheckedKeys(t=!1){return this.getCheckedNodes(t).map(l=>(l||{})[this.key])}getHalfCheckedNodes(){const t=[],l=function(o){(o.root?o.root.childNodes:o.childNodes).forEach(s=>{s.indeterminate&&t.push(s.data),l(s)})};return l(this),t}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(t=>(t||{})[this.key])}_getAllNodes(){const t=[],l=this.nodesMap;for(const o in l)dt(l,o)&&t.push(l[o]);return t}updateChildren(t,l){const o=this.nodesMap[t];if(!o)return;const n=o.childNodes;for(let s=n.length-1;s>=0;s--){const a=n[s];this.remove(a.data)}for(let s=0,a=l.length;s<a;s++){const c=l[s];this.append(c,o.data)}}_setCheckedKeys(t,l=!1,o){const n=this._getAllNodes().sort((d,y)=>d.level-y.level),s=Object.create(null),a=Object.keys(o);n.forEach(d=>d.setChecked(!1,!1));const c=d=>{d.childNodes.forEach(y=>{var f;s[y.data[t]]=!0,(f=y.childNodes)!=null&&f.length&&c(y)})};for(let d=0,y=n.length;d<y;d++){const f=n[d],p=f.data[t].toString();if(!a.includes(p)){f.checked&&!s[p]&&f.setChecked(!1,!1);continue}if(f.childNodes.length&&c(f),f.isLeaf||this.checkStrictly){f.setChecked(!0,!1);continue}if(f.setChecked(!0,!0),l){f.setChecked(!1,!1);const u=function(h){h.childNodes.forEach(C=>{C.isLeaf||C.setChecked(!1,!1),u(C)})};u(f)}}}setCheckedNodes(t,l=!1){const o=this.key,n={};t.forEach(s=>{n[(s||{})[o]]=!0}),this._setCheckedKeys(o,l,n)}setCheckedKeys(t,l=!1){this.defaultCheckedKeys=t;const o=this.key,n={};t.forEach(s=>{n[s]=!0}),this._setCheckedKeys(o,l,n)}setDefaultExpandedKeys(t){t=t||[],this.defaultExpandedKeys=t,t.forEach(l=>{const o=this.getNode(l);o&&o.expand(null,this.autoExpandParent)})}setChecked(t,l,o){const n=this.getNode(t);n&&n.setChecked(!!l,o)}getCurrentNode(){return this.currentNode}setCurrentNode(t){const l=this.currentNode;l&&(l.isCurrent=!1),this.currentNode=t,this.currentNode.isCurrent=!0}setUserCurrentNode(t,l=!0){const o=t[this.key],n=this.nodesMap[o];this.setCurrentNode(n),l&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(t,l=!0){if(this.currentNodeKey=t,t==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const o=this.getNode(t);o&&(this.setCurrentNode(o),l&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const _l=X({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const t=x("tree"),l=ne("NodeInstance"),o=ne("RootTree");return()=>{const n=e.node,{data:s,store:a}=n;return e.renderContent?e.renderContent(Ae,{_self:l,node:n,data:s,store:a}):z(o.ctx.slots,"default",{node:n,data:s},()=>[Ae("span",{class:t.be("node","label")},[n.label])])}}});var eo=re(_l,[["__file","tree-node-content.vue"]]);function _t(e){const t=ne("TreeNodeMap",null),l={treeNodeExpand:o=>{e.node!==o&&e.node.collapse()},children:[]};return t&&t.children.push(l),be("TreeNodeMap",l),{broadcastExpanded:o=>{if(e.accordion)for(const n of l.children)n.treeNodeExpand(o)}}}const en=Symbol("dragEvents");function to({props:e,ctx:t,el$:l,dropIndicator$:o,store:n}){const s=x("tree"),a=D({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return be(en,{treeNodeDragStart:({event:f,treeNode:p})=>{if(ae(e.allowDrag)&&!e.allowDrag(p.node))return f.preventDefault(),!1;f.dataTransfer.effectAllowed="move";try{f.dataTransfer.setData("text/plain","")}catch(r){}a.value.draggingNode=p,t.emit("node-drag-start",p.node,f)},treeNodeDragOver:({event:f,treeNode:p})=>{const r=p,u=a.value.dropNode;u&&u.node.id!==r.node.id&&st(u.$el,s.is("drop-inner"));const h=a.value.draggingNode;if(!h||!r)return;let g=!0,C=!0,T=!0,$=!0;ae(e.allowDrop)&&(g=e.allowDrop(h.node,r.node,"prev"),$=C=e.allowDrop(h.node,r.node,"inner"),T=e.allowDrop(h.node,r.node,"next")),f.dataTransfer.dropEffect=C||g||T?"move":"none",(g||C||T)&&(u==null?void 0:u.node.id)!==r.node.id&&(u&&t.emit("node-drag-leave",h.node,u.node,f),t.emit("node-drag-enter",h.node,r.node,f)),g||C||T?a.value.dropNode=r:a.value.dropNode=null,r.node.nextSibling===h.node&&(T=!1),r.node.previousSibling===h.node&&(g=!1),r.node.contains(h.node,!1)&&(C=!1),(h.node===r.node||h.node.contains(r.node))&&(g=!1,C=!1,T=!1);const F=r.$el.querySelector(`.${s.be("node","content")}`).getBoundingClientRect(),K=l.value.getBoundingClientRect();let B;const se=g?C?.25:T?.45:1:-1,j=T?C?.75:g?.55:0:1;let ue=-9999;const m=f.clientY-F.top;m<F.height*se?B="before":m>F.height*j?B="after":C?B="inner":B="none";const w=r.$el.querySelector(`.${s.be("node","expand-icon")}`).getBoundingClientRect(),P=o.value;B==="before"?ue=w.top-K.top:B==="after"&&(ue=w.bottom-K.top),P.style.top=`${ue}px`,P.style.left=`${w.right-K.left}px`,B==="inner"?_n(r.$el,s.is("drop-inner")):st(r.$el,s.is("drop-inner")),a.value.showDropIndicator=B==="before"||B==="after",a.value.allowDrop=a.value.showDropIndicator||$,a.value.dropType=B,t.emit("node-drag-over",h.node,r.node,f)},treeNodeDragEnd:f=>{const{draggingNode:p,dropType:r,dropNode:u}=a.value;if(f.preventDefault(),f.dataTransfer&&(f.dataTransfer.dropEffect="move"),p&&u){const h={data:p.node.data};r!=="none"&&p.node.remove(),r==="before"?u.node.parent.insertBefore(h,u.node):r==="after"?u.node.parent.insertAfter(h,u.node):r==="inner"&&u.node.insertChild(h),r!=="none"&&(n.value.registerNode(h),n.value.key&&p.node.eachNode(g=>{var C;(C=n.value.nodesMap[g.data[n.value.key]])==null||C.setChecked(g.checked,!n.value.checkStrictly)})),st(u.$el,s.is("drop-inner")),t.emit("node-drag-end",p.node,u.node,r,f),r!=="none"&&t.emit("node-drop",p.node,u.node,r,f)}p&&!u&&t.emit("node-drag-end",p.node,null,r,f),a.value.showDropIndicator=!1,a.value.draggingNode=null,a.value.dropNode=null,a.value.allowDrop=!0}}),{dragState:a}}const no=X({name:"ElTreeNode",components:{ElCollapseTransition:Al,ElCheckbox:$l,NodeContent:eo,ElIcon:Gt,Loading:el},props:{node:{type:me,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(e,t){const l=x("tree"),{broadcastExpanded:o}=_t(e),n=ne("RootTree"),s=D(!1),a=D(!1),c=D(),d=D(),y=D(),f=ne(en),p=Oe();be("NodeInstance",p),e.node.expanded&&(s.value=!0,a.value=!0);const r=n.props.props.children||"children";V(()=>{var m;const w=(m=e.node.data)==null?void 0:m[r];return w&&[...w]},()=>{e.node.updateChildren()}),V(()=>e.node.indeterminate,m=>{g(e.node.checked,m)}),V(()=>e.node.checked,m=>{g(m,e.node.indeterminate)}),V(()=>e.node.childNodes.length,()=>e.node.reInitChecked()),V(()=>e.node.expanded,m=>{W(()=>s.value=m),m&&(a.value=!0)});const u=m=>gt(n.props.nodeKey,m.data),h=m=>{const w=e.props.class;if(!w)return{};let P;if(ae(w)){const{data:_}=m;P=w(_,m)}else P=w;return pt(P)?{[P]:!0}:P},g=(m,w)=>{(c.value!==m||d.value!==w)&&n.ctx.emit("check-change",e.node.data,m,w),c.value=m,d.value=w},C=m=>{ut(n.store,n.ctx.emit,()=>{var w;if((w=n==null?void 0:n.props)==null?void 0:w.nodeKey){const _=u(e.node);n.store.value.setCurrentNodeKey(_)}else n.store.value.setCurrentNode(e.node)}),n.currentNode.value=e.node,n.props.expandOnClickNode&&$(),(n.props.checkOnClickNode||e.node.isLeaf&&n.props.checkOnClickLeaf)&&!e.node.disabled&&F(!e.node.checked),n.ctx.emit("node-click",e.node.data,e.node,p,m)},T=m=>{var w;(w=n.instance.vnode.props)!=null&&w.onNodeContextmenu&&(m.stopPropagation(),m.preventDefault()),n.ctx.emit("node-contextmenu",m,e.node.data,e.node,p)},$=()=>{e.node.isLeaf||(s.value?(n.ctx.emit("node-collapse",e.node.data,e.node,p),e.node.collapse()):e.node.expand(()=>{t.emit("node-expand",e.node.data,e.node,p)}))},F=m=>{e.node.setChecked(m,!(n!=null&&n.props.checkStrictly)),W(()=>{const w=n.store.value;n.ctx.emit("check",e.node.data,{checkedNodes:w.getCheckedNodes(),checkedKeys:w.getCheckedKeys(),halfCheckedNodes:w.getHalfCheckedNodes(),halfCheckedKeys:w.getHalfCheckedKeys()})})};return{ns:l,node$:y,tree:n,expanded:s,childNodeRendered:a,oldChecked:c,oldIndeterminate:d,getNodeKey:u,getNodeClass:h,handleSelectChange:g,handleClick:C,handleContextMenu:T,handleExpandIconClick:$,handleCheckChange:F,handleChildNodeExpand:(m,w,P)=>{o(w),n.ctx.emit("node-expand",m,w,P)},handleDragStart:m=>{n.props.draggable&&f.treeNodeDragStart({event:m,treeNode:e})},handleDragOver:m=>{m.preventDefault(),n.props.draggable&&f.treeNodeDragOver({event:m,treeNode:{$el:y.value,node:e.node}})},handleDrop:m=>{m.preventDefault()},handleDragEnd:m=>{n.props.draggable&&f.treeNodeDragEnd(m)},CaretRight:tl}}});function lo(e,t,l,o,n,s){const a=Q("el-icon"),c=Q("el-checkbox"),d=Q("loading"),y=Q("node-content"),f=Q("el-tree-node"),p=Q("el-collapse-transition");return he((E(),I("div",{ref:"node$",class:N([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:q(e.handleClick,["stop"]),onContextmenu:e.handleContextMenu,onDragstart:q(e.handleDragStart,["stop"]),onDragover:q(e.handleDragOver,["stop"]),onDragend:q(e.handleDragEnd,["stop"]),onDrop:q(e.handleDrop,["stop"])},[A("div",{class:N(e.ns.be("node","content")),style:Me({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(E(),U(a,{key:0,class:N([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:q(e.handleExpandIconClick,["stop"])},{default:H(()=>[(E(),U(Je(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):R("v-if",!0),e.showCheckbox?(E(),U(c,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:q(()=>{},["stop"]),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):R("v-if",!0),e.node.loading?(E(),U(a,{key:2,class:N([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:H(()=>[oe(d)]),_:1},8,["class"])):R("v-if",!0),oe(y,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),oe(p,null,{default:H(()=>[!e.renderAfterExpand||e.childNodeRendered?he((E(),I("div",{key:0,class:N(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded},[(E(!0),I(xe,null,_e(e.node.childNodes,r=>(E(),U(f,{key:e.getNodeKey(r),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:r,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded"])),[[Ke,e.expanded]]):R("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[Ke,e.node.visible]])}var oo=re(no,[["render",lo],["__file","tree-node.vue"]]);function ao({el$:e},t){const l=x("tree"),o=Ft([]),n=Ft([]);Pe(()=>{a()}),kl(()=>{o.value=Array.from(e.value.querySelectorAll("[role=treeitem]")),n.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"))}),V(n,c=>{c.forEach(d=>{d.setAttribute("tabindex","-1")})}),nl(e,"keydown",c=>{const d=c.target;if(!d.className.includes(l.b("node")))return;const y=c.code;o.value=Array.from(e.value.querySelectorAll(`.${l.is("focusable")}[role=treeitem]`));const f=o.value.indexOf(d);let p;if([ie.up,ie.down].includes(y)){if(c.preventDefault(),y===ie.up){p=f===-1?0:f!==0?f-1:o.value.length-1;const u=p;for(;!t.value.getNode(o.value[p].dataset.key).canFocus;){if(p--,p===u){p=-1;break}p<0&&(p=o.value.length-1)}}else{p=f===-1?0:f<o.value.length-1?f+1:0;const u=p;for(;!t.value.getNode(o.value[p].dataset.key).canFocus;){if(p++,p===u){p=-1;break}p>=o.value.length&&(p=0)}}p!==-1&&o.value[p].focus()}[ie.left,ie.right].includes(y)&&(c.preventDefault(),d.click());const r=d.querySelector('[type="checkbox"]');[ie.enter,ie.numpadEnter,ie.space].includes(y)&&r&&(c.preventDefault(),r.click())});const a=()=>{var c;o.value=Array.from(e.value.querySelectorAll(`.${l.is("focusable")}[role=treeitem]`)),n.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"));const d=e.value.querySelectorAll(`.${l.is("checked")}[role=treeitem]`);if(d.length){d[0].setAttribute("tabindex","0");return}(c=o.value[0])==null||c.setAttribute("tabindex","0")}}const so=X({name:"ElTree",components:{ElTreeNode:oo},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkOnClickLeaf:{type:Boolean,default:!0},checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:it}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,t){const{t:l}=jt(),o=x("tree"),n=ne(De,null),s=D(new xl({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));s.value.initialize();const a=D(s.value.root),c=D(null),d=D(null),y=D(null),{broadcastExpanded:f}=_t(e),{dragState:p}=to({props:e,ctx:t,el$:d,dropIndicator$:y,store:s});ao({el$:d},s);const r=k(()=>{const{childNodes:b}=a.value,O=n?n.hasFilteredOptions!==0:!1;return(!b||b.length===0||b.every(({visible:ee})=>!ee))&&!O});V(()=>e.currentNodeKey,b=>{s.value.setCurrentNodeKey(b)}),V(()=>e.defaultCheckedKeys,b=>{s.value.setDefaultCheckedKey(b)}),V(()=>e.defaultExpandedKeys,b=>{s.value.setDefaultExpandedKeys(b)}),V(()=>e.data,b=>{s.value.setData(b)},{deep:!0}),V(()=>e.checkStrictly,b=>{s.value.checkStrictly=b});const u=b=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");s.value.filter(b)},h=b=>gt(e.nodeKey,b.data),g=b=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const O=s.value.getNode(b);if(!O)return[];const ee=[O.data];let ve=O.parent;for(;ve&&ve!==a.value;)ee.push(ve.data),ve=ve.parent;return ee.reverse()},C=(b,O)=>s.value.getCheckedNodes(b,O),T=b=>s.value.getCheckedKeys(b),$=()=>{const b=s.value.getCurrentNode();return b?b.data:null},F=()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const b=$();return b?b[e.nodeKey]:null},K=(b,O)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");s.value.setCheckedNodes(b,O)},B=(b,O)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");s.value.setCheckedKeys(b,O)},se=(b,O,ee)=>{s.value.setChecked(b,O,ee)},j=()=>s.value.getHalfCheckedNodes(),ue=()=>s.value.getHalfCheckedKeys(),m=(b,O=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");ut(s,t.emit,()=>{f(b),s.value.setUserCurrentNode(b,O)})},w=(b,O=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");ut(s,t.emit,()=>{f(),s.value.setCurrentNodeKey(b,O)})},P=b=>s.value.getNode(b),_=b=>{s.value.remove(b)},nt=(b,O)=>{s.value.append(b,O)},lt=(b,O)=>{s.value.insertBefore(b,O)},ot=(b,O)=>{s.value.insertAfter(b,O)},pe=(b,O,ee)=>{f(O),t.emit("node-expand",b,O,ee)},Te=(b,O)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");s.value.updateChildren(b,O)};return be("RootTree",{ctx:t,props:e,store:s,root:a,currentNode:c,instance:Oe()}),be(Ol,void 0),{ns:o,store:s,root:a,currentNode:c,dragState:p,el$:d,dropIndicator$:y,isEmpty:r,filter:u,getNodeKey:h,getNodePath:g,getCheckedNodes:C,getCheckedKeys:T,getCurrentNode:$,getCurrentKey:F,setCheckedNodes:K,setCheckedKeys:B,setChecked:se,getHalfCheckedNodes:j,getHalfCheckedKeys:ue,setCurrentNode:m,setCurrentKey:w,t:l,getNode:P,remove:_,append:nt,insertBefore:lt,insertAfter:ot,handleNodeExpand:pe,updateKeyChildren:Te}}});function io(e,t,l,o,n,s){const a=Q("el-tree-node");return E(),I("div",{ref:"el$",class:N([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner",e.dragState.dropType==="inner"),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(E(!0),I(xe,null,_e(e.root.childNodes,c=>(E(),U(a,{key:e.getNodeKey(c),node:c,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),e.isEmpty?(E(),I("div",{key:0,class:N(e.ns.e("empty-block"))},[z(e.$slots,"empty",{},()=>{var c;return[A("span",{class:N(e.ns.e("empty-text"))},le((c=e.emptyText)!=null?c:e.t("el.tree.emptyText")),3)]})],2)):R("v-if",!0),he(A("div",{ref:"dropIndicator$",class:N(e.ns.e("drop-indicator"))},null,2),[[Ke,e.dragState.showDropIndicator]])],2)}var ro=re(so,[["render",io],["__file","tree.vue"]]);const ft=tt(ro),uo=(e,{attrs:t,emit:l},{select:o,tree:n,key:s})=>{const a=x("tree-select");return V(()=>e.data,()=>{e.filterable&&W(()=>{var d,y;(y=n.value)==null||y.filter((d=o.value)==null?void 0:d.states.inputValue)})},{flush:"post"}),Z(L(L({},et(Re(e),Object.keys(rt.props))),t),{class:k(()=>t.class),style:k(()=>t.style),"onUpdate:modelValue":d=>l(te,d),valueKey:s,popperClass:k(()=>{const d=[a.e("popper")];return e.popperClass&&d.push(e.popperClass),d.join(" ")}),filterMethod:(d="")=>{var y;e.filterMethod?e.filterMethod(d):e.remoteMethod?e.remoteMethod(d):(y=n.value)==null||y.filter(d)}})},co=X({extends:qt,setup(e,t){const l=qt.setup(e,t);delete l.selectOptionClick;const o=Oe().proxy;return W(()=>{l.select.states.cachedOptions.get(o.value)||l.select.onOptionCreate(o)}),V(()=>t.attrs.visible,n=>{W(()=>{l.states.visible=n})},{immediate:!0}),l},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function ht(e){return e||e===0}function yt(e){return Y(e)&&e.length}function ke(e){return Y(e)?e:ht(e)?[e]:[]}function Xe(e,t,l,o,n){for(let s=0;s<e.length;s++){const a=e[s];if(t(a,s,e,n))return o?o(a,s,e,n):a;{const c=l(a);if(yt(c)){const d=Xe(c,t,l,o,a);if(d)return d}}}}function Ze(e,t,l,o){for(let n=0;n<e.length;n++){const s=e[n];t(s,n,e,o);const a=l(s);yt(a)&&Ze(a,t,l,s)}}const fo=(e,{attrs:t,slots:l,emit:o},{select:n,tree:s,key:a})=>{V(()=>e.modelValue,()=>{e.showCheckbox&&W(()=>{const r=s.value;r&&!Ee(r.getCheckedKeys(),ke(e.modelValue))&&r.setCheckedKeys(ke(e.modelValue))})},{immediate:!0,deep:!0});const c=k(()=>L({value:a.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf"},e.props)),d=(r,u)=>{var h;const g=c.value[r];return ae(g)?g(u,(h=s.value)==null?void 0:h.getNode(d("value",u))):u[g]},y=ke(e.modelValue).map(r=>Xe(e.data||[],u=>d("value",u)===r,u=>d("children",u),(u,h,g,C)=>C&&d("value",C))).filter(r=>ht(r)),f=k(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const r=[];return Ze(e.data.concat(e.cacheData),u=>{const h=d("value",u);r.push({value:h,currentLabel:d("label",u),isDisabled:d("disabled",u)})},u=>d("children",u)),r}),p=()=>{var r;return(r=s.value)==null?void 0:r.getCheckedKeys().filter(u=>{var h;const g=(h=s.value)==null?void 0:h.getNode(u);return!ol(g)&&ll(g.childNodes)})};return Z(L(L({},et(Re(e),Object.keys(ft.props))),t),{nodeKey:a,expandOnClickNode:k(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:k(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(y):y),renderContent:(r,{node:u,data:h,store:g})=>r(co,{value:d("value",h),label:d("label",h),disabled:d("disabled",h),visible:u.visible},e.renderContent?()=>e.renderContent(r,{node:u,data:h,store:g}):l.default?()=>l.default({node:u,data:h,store:g}):void 0),filterNodeMethod:(r,u,h)=>e.filterNodeMethod?e.filterNodeMethod(r,u,h):r?new RegExp(Yt(r),"i").test(d("label",u)||""):!0,onNodeClick:(r,u,h)=>{var g,C,T,$;if((g=t.onNodeClick)==null||g.call(t,r,u,h),!(e.showCheckbox&&e.checkOnClickNode)){if(!e.showCheckbox&&(e.checkStrictly||u.isLeaf)){if(!d("disabled",r)){const F=(C=n.value)==null?void 0:C.states.options.get(d("value",r));(T=n.value)==null||T.handleOptionSelect(F)}}else e.expandOnClickNode&&h.proxy.handleExpandIconClick();($=n.value)==null||$.focus()}},onCheck:(r,u)=>{var h;if(!e.showCheckbox)return;const g=d("value",r),C={};Ze([s.value.store.root],K=>C[K.key]=K,K=>K.childNodes);const T=u.checkedKeys,$=e.multiple?ke(e.modelValue).filter(K=>!(K in C)&&!T.includes(K)):[],F=$.concat(T);if(e.checkStrictly)o(te,e.multiple?F:F.includes(g)?g:void 0);else if(e.multiple){const K=p();o(te,$.concat(K))}else{const K=Xe([r],j=>!yt(d("children",j))&&!d("disabled",j),j=>d("children",j)),B=K?d("value",K):void 0,se=ht(e.modelValue)&&!!Xe([r],j=>d("value",j)===e.modelValue,j=>d("children",j));o(te,B===e.modelValue||se?void 0:B)}W(()=>{var K;const B=ke(e.modelValue);s.value.setCheckedKeys(B),(K=t.onCheck)==null||K.call(t,r,{checkedKeys:s.value.getCheckedKeys(),checkedNodes:s.value.getCheckedNodes(),halfCheckedKeys:s.value.getHalfCheckedKeys(),halfCheckedNodes:s.value.getHalfCheckedNodes()})}),(h=n.value)==null||h.focus()},onNodeExpand:(r,u,h)=>{var g;(g=t.onNodeExpand)==null||g.call(t,r,u,h),W(()=>{if(!e.checkStrictly&&e.lazy&&e.multiple&&u.checked){const C={},T=s.value.getCheckedKeys();Ze([s.value.store.root],K=>C[K.key]=K,K=>K.childNodes);const $=ke(e.modelValue).filter(K=>!(K in C)&&!T.includes(K)),F=p();o(te,$.concat(F))}})},cacheOptions:f})};var ho=X({props:{data:{type:Array,default:()=>[]}},setup(e){const t=ne(De);return V(()=>e.data,()=>{var l;e.data.forEach(n=>{t.states.cachedOptions.has(n.value)||t.states.cachedOptions.set(n.value,n)});const o=((l=t.selectRef)==null?void 0:l.querySelectorAll("input"))||[];Ut&&!Array.from(o).includes(document.activeElement)&&t.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const po=X({name:"ElTreeSelect",inheritAttrs:!1,props:Z(L(L({},rt.props),ft.props),{cacheData:{type:Array,default:()=>[]}}),setup(e,t){const{slots:l,expose:o}=t,n=D(),s=D(),a=k(()=>e.nodeKey||e.valueKey||"value"),c=uo(e,t,{select:n,tree:s,key:a}),p=fo(e,t,{select:n,tree:s,key:a}),{cacheOptions:d}=p,y=Mt(p,["cacheOptions"]),f=de({});return o(f),Pe(()=>{Object.assign(f,L(L({},et(s.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"])),et(n.value,["focus","blur","selectedLabel"])))}),()=>Ae(rt,de(Z(L({},c),{ref:r=>n.value=r})),Z(L({},l),{default:()=>[Ae(ho,{data:d.value}),Ae(ft,de(Z(L({},y),{ref:r=>s.value=r})))]}))}});var vo=re(po,[["__file","tree-select.vue"]]);const Mo=tt(vo);export{Mo as ElTreeSelect,Mo as default};
