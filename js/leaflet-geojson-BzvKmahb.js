var m=(f,i,t)=>new Promise((p,s)=>{var e=o=>{try{r(t.next(o))}catch(n){s(n)}},a=o=>{try{r(t.throw(o))}catch(n){s(n)}},r=o=>o.done?p(o.value):Promise.resolve(o.value).then(e,a);r((t=t.apply(f,i)).next())});import{E as h}from"./bootstrap-DHvr56dL.js";import{L as l}from"./leaflet-DlP-3Eo-.js";import{d as g,H as E,o as w,e as C,f as D,h as B}from"../jse/index-index-BGdo5wjl.js";const F={class:"h-full w-full"},k=g({name:"LeafletGeojson",__name:"leaflet-geojson",setup(f){const i=()=>m(null,null,function*(){try{const e=yield fetch("https://geojson.cn/api/china/1.6.2/china.json");if(!e.ok)throw new Error(`Network response was not ok: ${e.status} ${e.statusText}`);return yield e.json()}catch(e){throw console.error("Failed to fetch GeoJSON data:",e),e}});let t=null;const p=()=>{t=l.map("LMap",{center:[39.9,116.3],attributionControl:!1,zoomControl:!1,doubleClickZoom:!1,dragging:!0,zoom:12,minZoom:3,zoomSnap:.1})},s=["#F4E6C9","#FFE5D9","#DCC7AA","#C2D9A0","#BEE3DB","#C5DEF5","#D8B4E2","#F4CACA","#FAEED1"];return E(()=>{t&&t.remove()}),w(()=>m(null,null,function*(){p();try{const e=yield i(),a=e.features.map(o=>o.properties.name).sort(),r={};a.forEach((o,n)=>{r[o]=s[n%s.length]}),l.geoJSON(e,{style:o=>({color:r[o.properties.name],fillOpacity:.6,weight:1.5}),onEachFeature:(o,n)=>{const c=o.properties.center||o.properties.chenter;if(c&&Array.isArray(c)&&c.length>=2){const[d,u]=c,j=l.marker([u,d],{icon:l.divIcon({className:"polygon-label",html:`<span>${o.properties.name}</span>`,iconSize:[50,20]}),interactive:!1,permanent:!0}).addTo(t)}n.on("mouseover",()=>{n.setStyle({weight:3,color:"#51acff"})}),n.on("mouseout",()=>{n.setStyle({weight:1.5,color:r[o.properties.name]})})}}).addTo(t),t.fitBounds(l.geoJSON(e).getBounds())}catch(e){h.error("加载地理数据失败，请检查网络或稍后再试。"),console.error("Failed to load or render GeoJSON:",e)}})),(e,a)=>(D(),C("div",F,a[0]||(a[0]=[B("div",{id:"LMap",class:"h-full w-full"},null,-1)])))}});export{k as default};
