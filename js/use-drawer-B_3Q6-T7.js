var Ne=Object.defineProperty,je=Object.defineProperties;var We=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var Z=(o,t,s)=>t in o?Ne(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s,h=(o,t)=>{for(var s in t||(t={}))ne.call(t,s)&&Z(o,s,t[s]);if(J)for(var s of J(t))le.call(t,s)&&Z(o,s,t[s]);return o},z=(o,t)=>je(o,We(t));var R=(o,t)=>{var s={};for(var a in o)ne.call(o,a)&&t.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&J)for(var a of J(o))t.indexOf(a)<0&&le.call(o,a)&&(s[a]=o[a]);return s};var L=(o,t,s)=>Z(o,typeof t!="symbol"?t+"":t,s);var X=(o,t,s)=>new Promise((a,i)=>{var l=_=>{try{b(s.next(_))}catch(c){i(c)}},y=_=>{try{b(s.throw(_))}catch(c){i(c)}},b=_=>_.done?a(_.value):Promise.resolve(_.value).then(l,y);b((s=s.apply(o,t)).next())});import{c as Ue,aO as Ke,T as Je,S as ye,aP as Xe,aQ as Ye,aR as He,aS as Qe,ab as Ge,aT as Ze,aU as qe,aV as et,_ as tt,aW as st,aX as ot,aY as at,aZ as nt,a_ as lt,aA as re,a$ as ie,g as de}from"./bootstrap-DHvr56dL.js";import{d as w,c as P,v as p,f as r,u as e,U as Y,j as B,E as f,e as E,g,t as I,n as $,S as he,T as ve,k as v,y as _e,r as T,F as k,l as rt,w as be,h as N,Q as it,R as dt,Y as ct,G as M,D as ce,ac as ge,at as ut,a as pt,M as ft,au as mt,s as ue,m as we}from"../jse/index-index-BGdo5wjl.js";import{_ as yt,S as ht,c as vt}from"./use-vben-form-Cg1uQa9d.js";const pe=Ue("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_t=w({__name:"Separator",props:{class:{},label:{},orientation:{},decorative:{type:Boolean},asChild:{type:Boolean},as:{}},setup(o){const t=o,s=P(()=>{const l=t,{class:a}=l;return R(l,["class"])});return(a,i)=>(r(),p(e(Ke),Y(s.value,{class:e(B)("bg-border relative shrink-0",t.orientation==="vertical"?"h-full w-px":"h-px w-full",t.class)}),{default:f(()=>[t.label?(r(),E("span",{key:0,class:$(e(B)("text-muted-foreground bg-background absolute left-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 items-center justify-center text-xs",t.orientation==="vertical"?"w-[1px] px-1 py-2":"h-[1px] px-2 py-1"))},I(t.label),3)):g("",!0)]),_:1},16,["class"]))}}),bt=Je("bg-background shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500 border-border",{defaultVariants:{side:"right"},variants:{side:{bottom:"inset-x-0 bottom-0 border-t border-border data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left ",right:"inset-y-0 right-0 w-3/4 border-l  data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right",top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top"}}}),gt=w({__name:"Sheet",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(o,{emit:t}){const i=ye(o,t);return(l,y)=>(r(),p(e(Xe),he(ve(e(i))),{default:f(()=>[v(l.$slots,"default")]),_:3},16))}}),fe=w({__name:"SheetClose",props:{asChild:{type:Boolean},as:{}},setup(o){const t=o;return(s,a)=>(r(),p(e(Ye),he(ve(t)),{default:f(()=>[v(s.$slots,"default")]),_:3},16))}}),wt=["data-dismissable-drawer"],Ct=w({__name:"SheetOverlay",setup(o){He();const t=_e("DISMISSABLE_DRAWER_ID");return(s,a)=>(r(),E("div",{"data-dismissable-drawer":e(t),class:"bg-overlay z-popup inset-0"},null,8,wt))}}),Bt=w({inheritAttrs:!1,__name:"SheetContent",props:{appendTo:{default:"body"},class:{},modal:{type:Boolean},open:{type:Boolean},overlayBlur:{},side:{},zIndex:{},forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["close","closed","opened","escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:t}){const s=o,a=t,i=P(()=>{const A=s,{class:d,modal:m,open:u,side:x}=A;return R(A,["class","modal","open","side"])});function l(){return s.appendTo==="body"||s.appendTo===document.body||!s.appendTo}const y=P(()=>l()?"fixed":"absolute"),b=ye(i,a),_=T(null);function c(d){var m;d.target===((m=_.value)==null?void 0:m.$el)&&(s.open?a("opened"):a("closed"))}return(d,m)=>(r(),p(e(Qe),{to:d.appendTo},{default:f(()=>[k(Ge,{name:"fade"},{default:f(()=>[d.open&&d.modal?(r(),p(Ct,{key:0,style:rt(z(h({},d.zIndex?{zIndex:d.zIndex}:{}),{position:y.value,backdropFilter:d.overlayBlur&&d.overlayBlur>0?`blur(${d.overlayBlur}px)`:"none"}))},null,8,["style"])):g("",!0)]),_:1}),k(e(Ze),Y({ref_key:"contentRef",ref:_,class:e(B)("z-popup",e(bt)({side:d.side}),s.class),style:z(h({},d.zIndex?{zIndex:d.zIndex}:{}),{position:y.value}),onAnimationend:c},h(h({},e(b)),d.$attrs)),{default:f(()=>[v(d.$slots,"default")]),_:3},16,["class","style"])]),_:3},8,["to"]))}}),q=w({__name:"SheetDescription",props:{class:{},asChild:{type:Boolean},as:{}},setup(o){const t=o,s=P(()=>{const l=t,{class:a}=l;return R(l,["class"])});return(a,i)=>(r(),p(e(qe),Y({class:e(B)("text-muted-foreground text-sm",t.class)},s.value),{default:f(()=>[v(a.$slots,"default")]),_:3},16,["class"]))}}),xt=w({__name:"SheetFooter",props:{class:{}},setup(o){const t=o;return(s,a)=>(r(),E("div",{class:$(e(B)("flex flex-row flex-col-reverse justify-end gap-x-2",t.class))},[v(s.$slots,"default")],2))}}),Ot=w({__name:"SheetHeader",props:{class:{}},setup(o){const t=o;return(s,a)=>(r(),E("div",{class:$(e(B)("flex flex-col text-center sm:text-left",t.class))},[v(s.$slots,"default")],2))}}),ee=w({__name:"SheetTitle",props:{class:{},asChild:{type:Boolean},as:{}},setup(o){const t=o,s=P(()=>{const l=t,{class:a}=l;return R(l,["class"])});return(a,i)=>(r(),p(e(et),Y({class:e(B)("text-foreground font-medium",t.class)},s.value),{default:f(()=>[v(a.$slots,"default")]),_:3},16,["class"]))}}),kt={class:"dot relative inline-block size-9 text-3xl"},St={key:1,class:"text-primary mt-4 text-xs"},Dt=w({name:"VbenLoading",__name:"loading",props:{class:{},minLoadingTime:{default:50},spinning:{type:Boolean},text:{default:""}},setup(o){const t=o,s=T(!1),a=T(!1),i=T();be(()=>t.spinning,y=>{if(!y){s.value=!1,clearTimeout(i.value);return}i.value=setTimeout(()=>{s.value=!0,s.value&&(a.value=!0)},t.minLoadingTime)},{immediate:!0});function l(){s.value||(a.value=!1)}return(y,b)=>(r(),E("div",{class:$(e(B)("z-100 dark:bg-overlay bg-overlay-content absolute left-0 top-0 flex size-full flex-col items-center justify-center transition-all duration-500",{"invisible opacity-0":!s.value},t.class)),onTransitionend:l},[a.value?v(y.$slots,"icon",{key:0},()=>[N("span",kt,[(r(),E(it,null,dt(4,_=>N("i",{key:_,class:"bg-primary absolute block size-4 origin-[50%_50%] scale-75 rounded-full opacity-30"})),64))])],!0):g("",!0),y.text?(r(),E("div",St,I(y.text),1)):g("",!0),v(y.$slots,"default",{},void 0,!0)],34))}}),$t=tt(Dt,[["__scopeId","data-v-13e5d83e"]]),Tt={class:"flex items-center"},At={class:"flex-center"},It=w({__name:"drawer",props:{drawerApi:{default:void 0},appendToMain:{type:Boolean,default:!1},cancelText:{},class:{},closable:{type:Boolean},closeIconPlacement:{default:"right"},closeOnClickModal:{type:Boolean},closeOnPressEscape:{type:Boolean},confirmLoading:{type:Boolean},confirmText:{},contentClass:{},description:{},destroyOnClose:{type:Boolean,default:!1},footer:{type:Boolean},footerClass:{},header:{type:Boolean},headerClass:{},loading:{type:Boolean},modal:{type:Boolean},openAutoFocus:{type:Boolean},overlayBlur:{},placement:{},showCancelButton:{type:Boolean},showConfirmButton:{type:Boolean},submitting:{type:Boolean,default:!1},title:{},titleTooltip:{},zIndex:{default:1e3}},setup(o){var U,ae;const t=o,s=st.getComponents(),a=ct();ge("DISMISSABLE_DRAWER_ID",a);const i=T(),{$t:l}=ot(),{isMobile:y}=at(),b=(ae=(U=t.drawerApi)==null?void 0:U.useStore)==null?void 0:ae.call(U),{appendToMain:_,cancelText:c,class:d,closable:m,closeIconPlacement:u,closeOnClickModal:x,closeOnPressEscape:S,confirmLoading:A,confirmText:H,contentClass:Ce,description:j,destroyOnClose:Be,footer:xe,footerClass:Oe,header:ke,headerClass:Se,loading:te,modal:De,openAutoFocus:$e,overlayBlur:Te,placement:F,showCancelButton:Ae,showConfirmButton:Ie,submitting:O,title:W,titleTooltip:se,zIndex:Ee}=nt(t,b);function Pe(n){(!x.value||O.value)&&n.preventDefault()}function ze(n){(!S.value||O.value)&&n.preventDefault()}function Re(n){const C=n.target,K=C==null?void 0:C.dataset.dismissableDrawer;(O.value||!x.value||K!==a)&&n.preventDefault()}function Fe(n){$e.value||n==null||n.preventDefault()}function oe(n){n.preventDefault(),n.stopPropagation()}const Ve=P(()=>_.value?`#${lt}>div:not(.absolute)>div`:void 0),Q=T(!1),G=T(!0);be(()=>{var n;return(n=b==null?void 0:b.value)==null?void 0:n.isOpen},n=>{G.value=!1,n&&!e(Q)&&(Q.value=!0)});function Le(){var n;G.value=!0,(n=t.drawerApi)==null||n.onClosed()}const Me=P(()=>!e(Be)&&e(Q));return(n,C)=>{var K;return r(),p(e(gt),{modal:!1,open:(K=e(b))==null?void 0:K.isOpen,"onUpdate:open":C[3]||(C[3]=()=>{var V;return(V=n.drawerApi)==null?void 0:V.close()})},{default:f(()=>{var V;return[k(e(Bt),{"append-to":Ve.value,class:$(e(B)("flex w-[520px] flex-col",e(d),{"!w-full":e(y)||e(F)==="bottom"||e(F)==="top","max-h-[100vh]":e(F)==="bottom"||e(F)==="top",hidden:G.value})),modal:e(De),open:(V=e(b))==null?void 0:V.isOpen,side:e(F),"z-index":e(Ee),"force-mount":Me.value,"overlay-blur":e(Te),onCloseAutoFocus:oe,onClosed:Le,onEscapeKeyDown:ze,onFocusOutside:oe,onInteractOutside:Pe,onOpenAutoFocus:Fe,onOpened:C[2]||(C[2]=()=>{var D;return(D=n.drawerApi)==null?void 0:D.onOpened()}),onPointerDownOutside:Re},{default:f(()=>[e(ke)?(r(),p(e(Ot),{key:0,class:$(e(B)("!flex flex-row items-center justify-between border-b px-6 py-5",e(Se),{"px-4 py-3":e(m),"pl-2":e(m)&&e(u)==="left"}))},{default:f(()=>[N("div",Tt,[e(m)&&e(u)==="left"?(r(),p(e(fe),{key:0,"as-child":"",disabled:e(O),class:"data-[state=open]:bg-secondary ml-[2px] cursor-pointer rounded-full opacity-80 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none"},{default:f(()=>[v(n.$slots,"close-icon",{},()=>[k(e(re),null,{default:f(()=>[k(e(pe),{class:"size-4"})]),_:1})])]),_:3},8,["disabled"])):g("",!0),e(m)&&e(u)==="left"?(r(),p(e(_t),{key:1,class:"ml-1 mr-2 h-8",decorative:"",orientation:"vertical"})):g("",!0),e(W)?(r(),p(e(ee),{key:2,class:"text-left"},{default:f(()=>[v(n.$slots,"title",{},()=>[M(I(e(W))+" ",1),e(se)?(r(),p(e(yt),{key:0,"trigger-class":"pb-1"},{default:f(()=>[M(I(e(se)),1)]),_:1})):g("",!0)])]),_:3})):g("",!0),e(j)?(r(),p(e(q),{key:3,class:"mt-1 text-xs"},{default:f(()=>[v(n.$slots,"description",{},()=>[M(I(e(j)),1)])]),_:3})):g("",!0)]),!e(W)||!e(j)?(r(),p(e(ie),{key:0},{default:f(()=>[e(W)?g("",!0):(r(),p(e(ee),{key:0})),e(j)?g("",!0):(r(),p(e(q),{key:1}))]),_:1})):g("",!0),N("div",At,[v(n.$slots,"extra"),e(m)&&e(u)==="right"?(r(),p(e(fe),{key:0,"as-child":"",disabled:e(O),class:"data-[state=open]:bg-secondary ml-[2px] cursor-pointer rounded-full opacity-80 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none"},{default:f(()=>[v(n.$slots,"close-icon",{},()=>[k(e(re),null,{default:f(()=>[k(e(pe),{class:"size-4"})]),_:1})])]),_:3},8,["disabled"])):g("",!0)])]),_:3},8,["class"])):(r(),p(e(ie),{key:1},{default:f(()=>[k(e(ee)),k(e(q))]),_:1})),N("div",{ref_key:"wrapperRef",ref:i,class:$(e(B)("relative flex-1 overflow-y-auto p-3",e(Ce),{"pointer-events-none":e(te)||e(O)}))},[v(n.$slots,"default")],2),e(te)||e(O)?(r(),p(e($t),{key:2,spinning:""})):g("",!0),e(xe)?(r(),p(e(xt),{key:3,class:$(e(B)("w-full flex-row items-center justify-end border-t p-2 px-3",e(Oe)))},{default:f(()=>[v(n.$slots,"prepend-footer"),v(n.$slots,"footer",{},()=>[e(Ae)?(r(),p(ce(e(s).DefaultButton||e(de)),{key:0,variant:"ghost",disabled:e(O),onClick:C[0]||(C[0]=()=>{var D;return(D=n.drawerApi)==null?void 0:D.onCancel()})},{default:f(()=>[v(n.$slots,"cancelText",{},()=>[M(I(e(c)||e(l)("cancel")),1)])]),_:3},8,["disabled"])):g("",!0),v(n.$slots,"center-footer"),e(Ie)?(r(),p(ce(e(s).PrimaryButton||e(de)),{key:1,loading:e(A)||e(O),onClick:C[1]||(C[1]=()=>{var D;return(D=n.drawerApi)==null?void 0:D.onConfirm()})},{default:f(()=>[v(n.$slots,"confirmText",{},()=>[M(I(e(H)||e(l)("confirm")),1)])]),_:3},8,["loading"])):g("",!0)]),v(n.$slots,"append-footer")]),_:3},8,["class"])):g("",!0)]),_:3},8,["append-to","class","modal","open","side","z-index","force-mount","overlay-blur"])]}),_:3},8,["open"])}}});class Et{constructor(t={}){L(this,"sharedData",{payload:{}});L(this,"store");L(this,"api");L(this,"state");const m=t,{connectedComponent:s,onBeforeClose:a,onCancel:i,onClosed:l,onConfirm:y,onOpenChange:b,onOpened:_}=m,c=R(m,["connectedComponent","onBeforeClose","onCancel","onClosed","onConfirm","onOpenChange","onOpened"]),d={class:"",closable:!0,closeIconPlacement:"right",closeOnClickModal:!0,closeOnPressEscape:!0,confirmLoading:!1,contentClass:"",footer:!0,header:!0,isOpen:!1,loading:!1,modal:!0,openAutoFocus:!1,placement:"right",showCancelButton:!0,showConfirmButton:!0,submitting:!1,title:""};this.store=new ht(h(h({},d),c),{onUpdate:()=>{var x,S,A;const u=this.store.state;(u==null?void 0:u.isOpen)===((x=this.state)==null?void 0:x.isOpen)?this.state=u:(this.state=u,(A=(S=this.api).onOpenChange)==null||A.call(S,!!(u!=null&&u.isOpen)))}}),this.state=this.store.state,this.api={onBeforeClose:a,onCancel:i,onClosed:l,onConfirm:y,onOpenChange:b,onOpened:_},ut(this)}close(){return X(this,null,function*(){var s,a,i;((i=yield(a=(s=this.api).onBeforeClose)==null?void 0:a.call(s))!=null?i:!0)&&this.store.setState(l=>z(h({},l),{isOpen:!1,submitting:!1}))})}getData(){var t,s;return(s=(t=this.sharedData)==null?void 0:t.payload)!=null?s:{}}lock(t=!0){return this.setState({submitting:t})}onCancel(){var t,s;this.api.onCancel?(s=(t=this.api).onCancel)==null||s.call(t):this.close()}onClosed(){var t,s;this.state.isOpen||(s=(t=this.api).onClosed)==null||s.call(t)}onConfirm(){var t,s;(s=(t=this.api).onConfirm)==null||s.call(t)}onOpened(){var t,s;this.state.isOpen&&((s=(t=this.api).onOpened)==null||s.call(t))}open(){this.store.setState(t=>z(h({},t),{isOpen:!0}))}setData(t){return this.sharedData.payload=t,this}setState(t){return pt(t)?this.store.setState(t):this.store.setState(s=>h(h({},s),t)),this}unlock(){return this.lock(!1)}}const me=Symbol("VBEN_DRAWER_INJECT"),Pt={};function Mt(o={}){var _;const{connectedComponent:t}=o;if(t){const c=ft({}),d=T(!0),m=w((u,{attrs:x,slots:S})=>(ge(me,{extendApi(H){Object.setPrototypeOf(c,H)},options:o,reCreateDrawer(){return X(this,null,function*(){d.value=!1,yield we(),d.value=!0})}}),zt(c,h(h(h({},u),x),S)),()=>ue(d.value?t:"div",h(h({},u),x),S)),{name:"VbenParentDrawer",inheritAttrs:!1});return mt(()=>{var u;(u=c==null?void 0:c.close)==null||u.call(c)}),[m,c]}const s=_e(me,{}),a=h(h(h({},Pt),s.options),o);a.onOpenChange=c=>{var d,m,u;(d=o.onOpenChange)==null||d.call(o,c),(u=(m=s.options)==null?void 0:m.onOpenChange)==null||u.call(m,c)};const i=a.onClosed;a.onClosed=()=>{var c;i==null||i(),a.destroyOnClose&&((c=s.reCreateDrawer)==null||c.call(s))};const l=new Et(a),y=l;y.useStore=c=>vt(l.store,c);const b=w((c,{attrs:d,slots:m})=>()=>ue(It,z(h(h({},c),d),{drawerApi:y}),m),{name:"VbenDrawer",inheritAttrs:!1});return(_=s.extendApi)==null||_.call(s,y),[b,y]}function zt(o,t){return X(this,null,function*(){var i;if(!t||Object.keys(t).length===0)return;yield we();const s=(i=o==null?void 0:o.store)==null?void 0:i.state;if(!s)return;const a=new Set(Object.keys(s));for(const l of Object.keys(t))a.has(l)&&!["class"].includes(l)&&console.warn(`[Vben Drawer]: When 'connectedComponent' exists, do not set props or slots '${l}', which will increase complexity. If you need to modify the props of Drawer, please use useVbenDrawer or api.`)})}export{$t as V,pe as X,Mt as u};
